硕士专业学位论文
基于混合模型的铁路货运需求预测方法研究 Research on the application of hybrid model in railway freight
demand forecasting
作者：闫玉波 导师：任爽
北京交通大学 2020 年 7 月

学位论文版权使用授权书
本学位论文作者完全了解北京交通大学有关保留、使用学位论文的规定。特授 权北京交通大学可以将学位论文的全部或部分内容编入有关数据库进行检索，提 供阅览服务，并采用影印、缩印或扫描等复制手段保存、汇编以供查阅和借阅。同 意学校向国家有关部门或机构送交论文的复印件和磁盘。
（保密的学位论文在解密后适用本授权说明）

学位论文作者签名：

签字日期：

年月 日

导师签名： 签字日期：

年月

学校代码：10004

密级：公开

北京交通大学
硕士专业学位论文

基于混合模型的铁路货运需求预测方法研究
Research on the application of hybrid model in railway freight demand forecasting

作者姓名：闫玉波 导师姓名：任爽 工程硕士专业领域：计算机技术

学 号：18140044 职 称：副教授 学位级别：硕士学位

北京交通大学 2020 年 7 月
i

致谢
在中国共产党领导下，通过全中国人民的团结努力与白衣天使的辛勤工作，中 国打赢了这场抗疫战争。而我做到了在家不乱跑这种抗击疫情的有效措施。在这里 感谢我党，全中国人民的付出，尤其是战斗在一线的白衣天使的努力。这种不怕苦， 不怕累的遇事不怕事的敢打敢拼精神感动了我，以后的工作中也要秉持着这种精 神。
在这 2 年的硕士期间，有幸受到我的敬爱的导师专业指导，他时常勉励我们 “认真做事，认真做人”，“对自己所做的事情负责 ”让我深受感触，从此养好一 个好的认真做事的品质。专业学习上，老师常常把他的研究心得发给我们，指导我 们的学习研究。在这里，非常感谢我的敬爱的导师的教导，让我们成为更好的人。
非常感谢父母的付出，正是他们的辛勤工作赚钱养家，我才健康长大，读书研 究。
非常感谢同门师姐妹兄弟，正是有你们一路陪伴读研期间才有许多欢声笑语， 一起攻克生活上的学习上的难题。
最后也非常感谢我自己，感谢自己的乐观坚持。
ii

北京交通大学硕士专业学位论文

摘要

摘要
通过研究欧美发达国家运输业发展历史，发现相比于其他传统的公铁水独立 运输，运输形式为集装箱的多式联运最经济的运输方式。集装箱多式联运节约资源 减少成本且运输载体的利用率高，这主要是因为公铁水运输信息交流通畅，服务便 捷。中国的集装箱运输发展空间大，铁路集装箱运输随着大量大能力通道以及 18 个集装箱物流中心的建成而高速发展。但是存在缺乏联合公铁水的集装箱多式联 运信息系统，存在运输实体的信息交流闭塞导致空跑率高等问题。本文研究的问题 是全国和某区域铁路集装箱运量需求预测，为以后集装箱站点动态调配发展提供 决策支持。
通过对铁路集装箱运量数据研究，发现铁路集装箱运量数据具有明显的时间 序列特征，且受发货站所在地区物品产量及相关国家政策影响大。本文通过对铁路 集装箱运量时间序列分析得 ARIMA（Auto-Regressive Integrated Moving Average, ARIMA）拟合预测模型，并在国家统计局网站采集相关影响因素数据，通过计算 这些相关影响因素与铁路集装箱运量的 Spearman 秩相关系数，取得与铁路集装箱 运量相关程度高的影响因素作为训练预测铁路集装箱运量的 DBN（Deep Belief Networks, DBN）输入数据然后，并通过改进的粒子群算法 Sigmoid-OAPSO 得到预 测铁路集装箱运量的 DBN 模型结构，再通过铁路集装箱运量 ARIMA 模型与 DBN 模型组成混合模型，并得到对应在混合模型中的占比系数，此时该混合模型在训练 数据集上的 RMSE 最小，再将子模型 ARIMA 和 DBN 的系数做 ARIMA 拟合，并 预测未来 15 个月的系数，并在测试集上检验预测准确度。本文的创新点和贡献主 要如下：
（1）提出了一种改进的粒子群优化算法(Sigmoid-OAPSO)。引入 Sigmoid 随 机变量而不是均匀分布的随机变量来逃避局部最小，计算了粒子的新速度和新位 置同时结合了三个策略得到改进粒子群优化算法。
（2）提出了一种将 ARIMA 和 DBN 模型算法相混合的方法。ARIMA 和 DBN 都作为最终预测模型混合模型的子模型，且其在混合模型的占比系数通过分析也 是具有时间序列特征，所以再通过 ARIMA 拟合，并在测试集上试验，并得证本文 提出的混合模型预测准确度高，运算速度快。
（3）通过分析铁路集装箱智能化、信息化发展的需求，并将依照需求得出铁 路集装箱运输需求预测系统的需求分析，并做该系统的开发与实现
本文拟针对上述方法进行对比实验来证明混合模型的准确性和高效性，为铁 路集装箱运输智能化，信息化发展提供帮助。 关键词：集装箱运量；铁路货运量预测；深度置信网络；混合模型
iii

北京交通大学硕士专业学位论文

ABSTRACT

ABSTRACT
By studying the development history of the transport industry in developed countries in Europe and America, compared with other traditional independent transport of railway and water, the containerized multimodal transport is the best mode of transport for economic development. Container multimodal transport saves resources and reduces costs, and the utilization rate of container is high, the main public iron water transport information exchange is smooth, convenient service. China's container transport development space is large, railway container transport with a large number of capacity channels and the completion of 18 container logistics centers and high-speed development. However, there is a lack of container multimodal transport information system, and the lack of information exchange between transport entities leads to a high air running rate. The problem in this paper is to forecast the container traffic demand of the national railway (a certain region), which provides decision support for the dynamic deployment development of container stations in the future.
By studying the railway container traffic data, it is found that the railway container traffic data has obvious time series characteristics and is greatly influenced by the goods output in the area where the shipping station is located. This article through to railway container traffic volume time series ARIMA model, and factor of influence in the National Bureau of Statistics web site to collect relevant data, through calculating the related influencing factors and railway container of Spearman rank correlation coefficient, obtain high degree of railway container traffic related influence factors of training as a forecast of railway container DBN input data and then, and is obtained by the improved particle swarm algorithm Sigmoid-OAPSO predict DBN model structure of railway container, By railway container ARIMA model and DBN model of hybrid model, and get the corresponding proportion in the hybrid model coefficient, at this time the mixture model on the RMSE of the minimum training data set, then sub models ARIMA and DBN coefficient do fitting, and predict coefficient of 15 months in the future, and on the test set inspection prediction accuracy. The innovations and contributions of this thesis are as follows:
(1) An improved particle swarm optimization algorithm (Sigmoid-OAPSO) is proposed. Sigmoid random variable is introduced instead of uniformly distributed random variable to avoid local minima. The new velocity and new position of particles are
iv

北京交通大学硕士专业学位论文

ABSTRACT

calculated and the improved particle swarm optimization algorithm is obtained by combining three strategies.
(2) A hybrid method of ARIMA and DBN model algorithm is proposed. ARIMA and DBN are both sub-models of the final prediction model, and their proportion coefficient in the hybrid model is also characteristic of time series through analysis. Therefore, ARIMA is fitted and tested on the test set, and it is proved that the hybrid model proposed in this paper has high prediction accuracy.
(3) Through the analysis of the demand for the development of railway container intelligence and information, the demand analysis of railway container transport demand prediction system will be obtained according to the demand, and the development and implementation of the system
In this paper, a comparative experiment is conducted to prove the accuracy and efficiency of the hybrid model, and to effectively solve the problem of container scheduling ratio in the future, so as to provide help for the intelligent and informationbased development of railway container transport. KEYWORDS：Container volume; Railway freight volume forecasting; Deep confidence network; Hybrid model

v

北京交通大学硕士专业学位论文

目录

目录
摘要 ......................................................................................................................... iii ABSTRACT............................................................................................................. iv 1 引言 ...................................................................................................................... 1
1.1 论文研究背景和意义 ............................................................................... 1 1.2 国内外研究现状 ....................................................................................... 1
1.2.1 时间序列预测算法 ........................................................................ 2 1.2.2 货运需求预测算法 ........................................................................ 2 1.3 本文研究内容 ........................................................................................... 4 1.4 论文组织结构 ........................................................................................... 4 2 相关技术概论 ...................................................................................................... 6 2.1 相关性系数分类 ....................................................................................... 6 2.1.1 Pearson 相关系数............................................................................ 6 2.1.2 Spearman rank 相关系数 ................................................................ 7 2.2 粒子群优化算法 ....................................................................................... 7 2.3 线性时间序列预测算法 ........................................................................... 8 2.3.1 时间序列数据性质 ........................................................................ 8 2.3.2 ARIMA 模型 ................................................................................. 10 2.4 神经网络预测模型 ................................................................................. 12 2.4.1 神经网络概述 .............................................................................. 12 2.4.2 深度置信网络 .............................................................................. 13 2.5 回归算法衡量指标 ................................................................................. 15 2.5.1 MSE 均方误差 .............................................................................. 15 2.5.2 RMSE 均方根误差........................................................................ 15 2.5.3 R 方决定系数................................................................................ 15 2.6 本章小结 ................................................................................................. 16 3 基于改进粒子群优化算法的 DBN 预测模型研究 .......................................... 17 3.1 数据准备与环境 ..................................................................................... 17 3.1.1 原始数据与实验环境 .................................................................. 17 3.1.2 相关因素数据准备 ...................................................................... 18 3.1.3 数据统一化 .................................................................................. 19 3.2 构造改进的粒子群优化算法 ................................................................. 20
vi

北京交通大学硕士专业学位论文

目录

3.3 基于改进粒子群优化算法的 DBN 构造过程 ....................................... 21 3.4 基于改进粒子群优化算法的 DBN 某区域集装箱运量预测研究 ....... 22
3.4.1 Spearman 秩相关系数 ................................................................. 22 3.4.2 模型参数选择与优化 .................................................................. 23 3.4.3 预测结果展示 .............................................................................. 25 3.5 基于改进粒子群优化算法的 DBN 全国集装箱运量预测研究 ........... 25 3.5.1 Spearman 秩相关系数 .................................................................. 25 3.5.2 模型参数选择与优化 .................................................................. 27 3.5.3 预测结果展示 .............................................................................. 28 3.6 本章小结 ................................................................................................. 29 4 基于改进混合模型的集装箱运量预测研究 .................................................... 30 4.1 改进的混合模型研究 ............................................................................. 30 4.2 构造 ARIMA 时间序列预测模型 .......................................................... 31 4.2.1 方案设计和建模步骤 .................................................................. 31 4.2.2 基于 ARIMA 某区域集装箱运量预测研究 ............................... 32 4.2.3 基于 ARIMA 的全国集装箱运量预测研究 ............................... 39 4.3 基于改进的混合模型某区域铁路集装箱运量预测算法研究 ............. 46 4.3.1 子模型权重系数计算 .................................................................. 46 4.3.2 子模型权重系数 ARIMA 拟合 ................................................... 47 4.3.3 实验结果及对比分析 .................................................................. 50 4.4 基于改进的混合模型全国铁路集装箱运量预测算法研究 ................. 52 4.4.1 子模型权重系数计算 .................................................................. 52 4.4.2 子模型权重系数 ARIMA 拟合 ................................................... 53 4.4.3 实验结果及对比分析 .................................................................. 56 4.5 本章小结 ................................................................................................. 57 5 铁路集装箱运量运输需求预测系统设计与实现 ............................................ 58 5.1 系统需求分析 ......................................................................................... 58 5.1.1 功能需求分析 .............................................................................. 58 5.1.2 性能需求分析 .............................................................................. 59 5.2 系统功能设计 ......................................................................................... 60 5.2.1 系统整体设计 .............................................................................. 60 5.2.2 数据采集模块 .............................................................................. 60 5.2.3 预测模型管理模块 ...................................................................... 61 5.2.4 可视化展示模块 .......................................................................... 62
vii

北京交通大学硕士专业学位论文

目录

5.3 系统设计与实现 ..................................................................................... 62 5.3.1 系统技术架构 .............................................................................. 62 5.3.2 系统实现展示 .............................................................................. 64
5.4 本章小结 ................................................................................................. 65 6 总结与展望 ........................................................................................................ 66
6.1 总结 ......................................................................................................... 66 6.2 展望 ......................................................................................................... 66 参考文献 ................................................................................................................ 67 作者简历 ................................................................................................................ 70 独创性声明 ............................................................................................................ 71 学位论文数据集 .................................................................................................... 72

viii

北京交通大学硕士专业学位论文

引言

1 引言
本章主要介绍论文的研究背景、研究意义、目前国内外在铁路货运需求预测研 究现状及时间序列分析常用算法；然后介绍本文的主要研究内容，研究中的遇到的 难点、研究中出现的问题最后论述本论文的整体组织结构。
1.1 论文研究背景和意义
铁路作为我国货运的主要方式，而集装箱作为环保的多式联运运输的载体在 铁路的发展空间巨大。通过研究欧美发达国家运输业的发展历史可以得知标准化 的集装箱多式联运已成为国际上的最优秀的环保的运输方式[1]。如在欧洲，可脱卸 箱体和集装箱运输占联运市场份额为 70%以上[2]。国务院在“十三五”综合交通运 输发展主要指标中明确要求大力发展集装箱铁水联运。国家要求到 2020 年集装箱 运量达到铁路货运量 20%左右[3]。
国家要求铁路需要实现基础设施和载运工具数字化发展与建设，同时要求集 装箱编组站依据信息自动化编组集装箱板车及箱体类型以便智能化运输的发展 [4]。 随着产业环境信息化的不断完善，多式联运企业的信息系统建设不仅要发挥整合 能力，打通物流信息链，以数据驱动供应链[5-6]。
集装箱运输是现代更是未来节能环保货物运输的重要方式，更是多式联运的 必要运输工具，而铁路运输的未来货物运输发展的重要趋势就是高效、环保、经济、 节能集装箱运输。但是发展集装箱运输中也遇到许多难点，首先在制定集装箱班列 编组计划过程中要考虑的问题有许多，包括在始发站、集装箱箱型、个数、位置以 及调配时间、板车与集装箱的匹配程度、集装箱班列编组辆数、在途中结点站或支 点站中转车时间成本、经济成本消耗还有集装箱本身流量等各个方面问题[7-8]。通 过集装箱运量未来的周预测和月度预测及时的动态的对发货站及周边需求集装箱 量提前调度，这样可以有效减少集装箱在始发站集结时间消耗、中转时间消耗、提 根据订单信息合理安排的发货就是接单既发货，这样既减少集装箱空跑率又增加 了运输效率与经济效益。
1.2 国内外研究现状
主要介绍国内外时间序列预测算法、货运需求预测研究发展情况。
1

北京交通大学硕士专业学位论文

引言

1.2.1 时间序列预测算法
时间序列预测是一个具有很高实用价值的研究领域。例如，网络访问流量的预 测允许公司及时调度资源，以防止大量并发访问可能导致的网站瘫痪。再比如，通 过预测商品的销量，可以确定下一次商品的采购量，以防止商品供不应求或滞销。 此外，投资者可以通过恰当地预测股票走势来获得最大利润。这些实际应用极大地 促进了对时间序列预测的研究。
到目前为止，中外许多学者都对时间序列预测进行了深入的研究。早期用于求 解时间序列预测问题的模型都是属于传统的统计学模型，例如求和自回归滑动平 均模型（Auto-Regressive Integrated Moving Average, ARIMA）[9]和自回归条件异方 差模型（Auto-Regressive Conditional Heteroskedasticity, ARCH）[10]等。然而，这些 模型都只适用于线性时间序列，在实际应用中有着极大的限制。后来发展到引入相 空间重构[11]和混沌时间序列预测方法[12]。随着机器学习相关理论应用到时间序列 预测领域，许多之前统计模型无法解决的非线性复杂时间序列预测问题都得到了 解决，并且预测精度得到了极大的提升。
机器学习中的一些经典算法和深度学习都可以用来求解时间序列预测问题， 例如前馈神经网络（Feed-forward Neural Network, FNN）、深度置信网络（Deep Belief Networks, DBN），极端梯度提升（EXtreme Gradient Boosting, XGBoost）、支持向量 机（Support Vector Machine, SVM）、人工神经网络（Artificial Neural Network, ANN）、 极限学习机（Extreme Learning Machine, ELM）等。
1.2.2 货运需求预测算法
20 世纪 90 年代以来，国内外许多学者对集装箱运量（吞吐量）和货物运量时 间序列预测进行了深入的研究取得了极大的进展。
国内货运预测上 ShenYin 等人[13]提出了一种模糊货运量的信息粒方法。从原 始时间序列数据中提取特征特征并表示为信息粒后，用支持向量机 （Support Vector Machine, SVM）对其建模。在考虑算法效率和预测精度的基础上，提出了 一 种 基 于 最 小 二 乘 法 的 支 持 向 量 机 算 法 ， 并 将 其 与 粒 子 群 算 法 相 结 合 。 Fenling Feng 等人提出了一种结合季节自回归综合移动平均（Seasonal Auto Regressive Integrated Moving Average, SARIMA）和深度置信网络（Deep Belief Network, DBN） 的集成模型。利用 SARIMA 查找铁路货运的规律再利用 DBN 挖掘指数与铁路货 运之间的复杂关系[14]。为了确定 DBN 的适当架构，包括每个隐藏层中网络层和 神经元的数量，设计了高斯粒子群优化算法来确定 DBN 的每个隐藏层中网络层和

2

北京交通大学硕士专业学位论文

引言

神经元的数量适当架构。Yongbin Xu 等人[15]研究了铁路煤炭运输体积的趋势，并 建立基于反向传播神经网络的组合预测模型。Jiahao Liu 等人[16]研究证明 RAS 算 法可以有效地预测相应的 O/D（起点 Origin/终点 Destination）对之间的未来货运 量。Zhida Guo 等人[17]利用遗传算法（Genetic Algorithm, GA）优化 GRNN 模型并 对 铁 路 货 运 量 进 行 了 预 测 。 Cheng Zhou 等 人 [18] 结 合 线 性 回 归 模 型 （ Linear Regression, LR）和自回归模型（Autoregressive, AR）提出了一种基于趋势分解和小 波分解的多级分解集成方法。Zheng Zhao 等人[19]提出了一种基于长短时记忆 （Long-short-termmemory, LSTM）网络的流量预测模型提高短期交通流预测的准 确性。
国外货运时间序列研究上 J.A.Moscoso-López 等人[20]提出了基于人工神经网 络和支持向量机两个预测模型，基于历史数据，提前一周预测港口的每日重量， 并进行比较。Westin J 等人[21]研究了基地矩阵拆分整合对里数、物流成本和总产 出的影响并按比例放大和缩小，并估计瑞典货运规模。在文献[22]中，利用 RNNGaussian DyBM（Dynamic Boltzmann machine, DyBM）来处理实际值数据，并实验 证明了非线性 RNN-Gaussian DyBM 模型比现有的 VAR 和 LSTM 网络等方法的有 显著的改进效果。Ye Ren 等人[23]在时间序列数据集实验证明了 RVFL（Random Vector Functional Link Network, RVFL）网络相比单一的非集成方法 SARIMA、人 工神经网络等具有训练简单、预测精度较高等优点。
在集装箱运量（吞吐量）研究上国内研究者贾飞跃等人[24]提出将因子分析和 曲线拟合集成在一起的集装箱吞吐量预测模型。郭雪[25]用 ARIMA 模型和最小二 乘支持向量机（Least Squares Support Vector Machine, LSSVR）预测模型集成了一 种预测模型在上海港的集装箱吞吐量数据集上进行研究验证。冯宏祥和 GRIFOLL Manel 等人[26]分别运用经验模式分解算法（Empirical Mode Decomposition，EMD） 和 季 节 求 和 自 回 归 滑 动 平 均 模 型 （ Seasonal Autoregressive Integrated Moving Average，SARIMA），将月度集装箱吞吐量数据分解为不同特征的分量然后用支 持向量回归（Support Vector Regression, SVR）模型分别对各分量进行预测。朱庆 辉等人[27]采用改进的基于小波函数 BP 神经网络，利用 2008-2017 年上海港的月度 集装箱吞吐量数据实验验证。吴建新[28]提出了一种综合反映港口发展情况、贸易 金融、中国与世界经济等因素对沿海港口集装箱吞吐量的影响的指数短期预测模 型并在我国沿海港口月度集装箱吞吐量数据上实验。汤银英等人[29]以某铁路局化 肥的月度货运量为实验数据构建了三次指数平滑法（Holt-Winters）乘法模型并设 计对比实验得出 Holt-Winters 模型的预测精度最高。梁宁等人[30]提出了基于灰色 关联分析（Grey Relation Analysis, GRA）与多项式核函数与径向基核函数线性组合 的混合核函数支持向量机（SVM-Mixed, SVM）的混合铁路货运量预测方法。
3

北京交通大学硕士专业学位论文

引言

1.3 本文研究内容
以下是本论文的主要研究内容： 查阅国内外对于时间序列分析预测模型的文献，了解铁路货运主流预测算法 应用的现状。分析国内外的研究成果，得出不同模型之间的优缺点，以及改进方 向。 在研究前人学者研究成果的基础上，本文分别构建 ARIMA 模型对某区域的 集装箱运量数据集进行月度预测研究；构造深度置信网络对某区域的集装箱运量 数据集进行月度预测研究，并对结果进行分析。 因为 ARIMA 模型对于线性时间序列数据拟合能力高，而对于时间序列中非 线性的成分拟合能力低，所以引入输入数据为相关影响指标训练的深度置信网络 模型预测某区域月度集装箱运量，这样充分考虑到了相关影响因素对集装箱运量 的作用，这样我们结合这两种模型的优势即分析了时间序列数据本身的特征也结 合了外部影响因素与集装箱运量的影响所以对这俩种模型进行混合，构建了 ARIMA-SOAPSO-DBN 混合模型来对数据集进行拟合，过程中利用改进的粒子群 优化算法优化深度置信网络求解参数，优化俩个子模型权重并进行 ARIMA 拟合 更好的预测未来的子模型权重，并实验得证混合预测模型有良好的预测效果。同 时也设计了该混合模型与其他单个模型对比实验，并通过几种评价标准对预测结 果进行对比，证明了本文提出的 ARIMA-SOAPSO-DBN 混合模型具有预测准确率 高，拟合程度高，运行速度快的优良特性。 最后研究铁路集装箱智能化、信息化发展的需求，并将依照需求研究铁路集 装箱运输需求预测系统的需求分析，并做该系统的开发与实现。

1.4 论文组织结构
本文的主要工作就是时间序列分析算法及深度置信网络的混合模型在集装箱 运量数据集中进行分析预测，一共分为六个章节，其中每个章节的组织安排如下：
第一章引言：简明介绍了此论文的研究背景和意义及时间序列预测，货运需求 预测以及混合模型的国内外研究现状，并对本文的研究内容和论文组织结构进行 阐述。
第二章文相关技术概论：主要介绍了相关系数方法原理及计算公式，基于时间 序列分析预测中常用线性拟合方法以及本研究用到的深度置信网络深度学习方法， 最后对时间序列预测方法进行小结。
第三章构造基于改进的粒子群优化算法优化的深度置信网络(DBN)：首先介绍

4

北京交通大学硕士专业学位论文

引言

改进的粒子群优化算法使用 Sigmoid 随机变量避免陷入局部最小并提出三个策略 改进粒子群算法，然后分析相关影响因素与铁路集装箱运量 Spearman 秩相关系数 值，并得出 Spearman 秩相关系数值大的作为深度置信网络的输入数据利用改进的 粒子群优化算法训练铁路集装箱运量预测深度置信网络并在铁路集装箱运量数据 及某区域集装箱运量数据证明改进算法高效性。
第四章构造铁路集装箱运量预测的混合模型：首先介绍改进的混合模型及构 造流程，然后通过过实验得到的铁路集装箱运量（某区域铁路集装箱运量）预测 ARIMA 模型之后通过计算 ARIMA 子模型预测值及 DBN 子模型预测值在混合模 型中的占比系数，并分析出该系数具有时间序列特征，并 ARIMA 拟合，得出未来 15 个月的数据，并在测试集上实验验证混合模型的准确性。
第五章铁路集装箱运量需求预测系统开发及设计：首先说明该系统的需求分 析就是铁路管理部门可以通过系统可视化及时掌握铁路集装箱运输的发展趋势并 及时调配集装箱促进多式联运的发展及铁路运输的信息化，智能化发展。
第六章总结与展望：主要对本文研究结果的一个总结，同时对论文的研究工作 做进一步讨论和展望。

5

北京交通大学硕士专业学位论文

相关技术概论

2 相关技术概论
本文首先阐述变量之间的相关性系数原理，然后介绍寻找算法模型最优参数 的方法，如粒子群优化算法，最后介绍目前研究人员在时间序列分析预测时常用的 方法及评价标准。

2.1 相关性系数分类
相关性系数（Pearson、Spearman）反映的都是两个变量之间变化趋势的方向 相关程度，其值范围为−1到+1，0 表示两个变量不相关，正值表示正相关，负值 表示负相关，值越大表示相关性越强。

2.1.1 Pearson 相关系数

Pearson 相关系数是一种线性相关系数。相关系数用𝜌𝑋,𝑌表示，其中𝑁为样本量， 计算见公式(2-1)(2-2)(2-3)：

( ) ( ) X ,Y

=

cov( X ,Y )  XY

=

E (( X

− X )(Y
 XY

− Y

))

=

E( XY ) − E( X )E(Y ) E X 2 − E2(X) E Y2 − E

 X ,Y =

N XY −  X Y

N X 2 − ( X )2 NY 2 − (Y )2

 X ,Y =

 XY −  X Y
N

 X 2 − ( X )2 Y 2 − (Y )2

N

N

𝑋与𝑌两个变量的协方差与两个变量的标准差之积的比值。所以𝑋与𝑌两个变量

的标准差不能为零。表 2-1 为 Pearson 相关系数特点及适用场景。

表 2-1 Pearson 相关系数特点及适用场景

Table 2-1 Pearson correlation coefficient features and applicable scenarios

特点

适用场景

若数据有异常值则计算不准确；

数据总体都为正态分布或接近正态分布；

两个连续变量间呈线性相关；

6

北京交通大学硕士专业学位论文

相关技术概论

2.1.2 Spearman rank 相关系数
Spearman rank 相关系数是衡量两个变量的相关性程度的非参数值[31-33]。它利 用单调方程评价两个统计变量的相关程度，取值范围为−1 ≤ 𝑟𝑠 ≤ 1，表 2-2 为描述 𝑟𝑠取值的绝对值的相关程度阶段表，当𝑟𝑠越接近−1时，俩变量之间为负相关；当𝑟𝑠 越接近+1时，俩变量之间为正相关。

表 2-2 相关系数数值对应的相关程度映射表

Table 2-2 Correlation coefficient values corresponding to the correlation degree mapping table

取值范围

0-0.19

0.20-0.39

0.40-0.59

0.60-0.79

0.8-1.0

相关程度

非常弱

弱

中

强

非常强

计算由公式(2-4)：

( xi − x )( yi − y )

s =

i
( xi − x )2 ( yi − y )2

i

i

s 通过也可由公式(2-5)来计算：

( ) s

=

1−

N

6 di2 N2 −1

2.2 粒子群优化算法
粒子群优化算法（Particle swarm optimization, PSO）是一种寻找最优解的计算 技术。PSO 初始化为一群随机粒子（随机解）。然后通过某种计算方法迭代找到 最优解。在每一次的迭代中，粒子通过跟踪𝑝𝑏𝑒𝑠𝑡, 𝑔𝑏𝑒𝑠𝑡来更新自己的位置与速度， 直到找到对于所研究的问题为最优的位置时停止，这就是粒子群优化算法找到所 研究的问题的全局最优解[34-35]。
有𝑚个维度的搜索空间的𝑁个粒子组成粒子群，且设第𝑖个粒子的当前位置为： 𝑋𝑖 = {𝑥𝑖1, 𝑥𝑖2, 𝑥𝑖3, ⋯ , 𝑥𝑖𝑚}；第𝑖个粒子的当前速度𝑉𝑖 = {𝑣𝑖1, 𝑣𝑖2, 𝑣𝑖3, … , 𝑣𝑖𝑚}；第𝑖个粒 子 的 最 优 位 置 为 ： 𝑃𝑖 = {𝑃𝑖1, 𝑃𝑖2, 𝑃𝑖3, … , 𝑃𝑖𝑚} ； 粒 子 群 的 全 局 最 优 位 置 为 : 𝑃𝑔 = {𝑃1𝑔, 𝑃2𝑔, 𝑃3𝑔, … , 𝑃𝑚𝑔}；粒子的迭代速度更新见公式(2-6)：

7

北京交通大学硕士专业学位论文

相关技术概论

( ) Vik+1 =  Vik + c1  rand 

pbest

−

X

k i

( ) +c2  rand  gbest − Xik

其中  为迭代权重系数，rand 为 0-1 的随机数。

( ) 

=

(qq01−)*

(q0 −
e(q1 − f

q1
) k

)
,

/

f1

* g,

1  f  f1 f1  f  f

𝜆计算由公式(2-7)，其中𝑞0为初始权重， 𝑞1为为线性约简中使用的惯性权值， 𝑘为调整非线性约简的系数。迭代的总次数表示为𝑓1， 𝑓2表示线性减权策略的总 数。

2.3 线性时间序列预测算法
主要介绍时间序列数据基本特征以及本研究用到的 ARIMA 模型。

2.3.1 时间序列数据性质
时间序列是以时间顺序排列的一系列数据，这些数据中的每一个由于受到一 些因素影响，一般会表现一些随机性，但是时间序列之间又存在着一定的相关关 系。时间序列记录了以往的行为，潜在规律[36]。
过往的时间序列数据集包含了数据的变化规律，所以首先需要对时间序列数 据集系统研究变化规律，然后根据变化规律来预测未来的变化趋势[37]。例如时间 序列数据集𝑆(𝑡)，在时刻𝑡1, 𝑡2, … , 𝑡𝑎得离散数集合𝑆(𝑡1), 𝑆(𝑡2), … , 𝑆(𝑡𝑁)。
本文研究的铁路集装箱运量就属于离散时间序列数据。 时间序列数据集统计特性： （1）概率分布 一组时间序列数据{𝑆(𝑡), 𝑡𝜖𝑇}，任取𝑡1, 𝑡2, … , 𝑡𝑘𝜖𝑇，其中𝑘为正整数，随机向量 (𝑆𝑡1, 𝑆𝑡2, … , 𝑆𝑡𝑘)的联合概率分布可以记为𝐹𝑡1,𝑡2,…,𝑡𝑘(𝑆1, 𝑆2, … , 𝑆𝑘)，然后由所有这些 分布函数构成{𝐹𝑡1,𝑡2,…,𝑡𝑘(𝑆1, 𝑆2, … , 𝑆𝑘), ∀𝑘𝜖正整数，∀𝑡1, 𝑡2, … , 𝑡𝑘 ∈ 𝑇}可以称之为序 列{𝑆(𝑡)}的概率分布族。 （2）特征统计量 常用于描述时间序列的统计量有三种，分别为均值𝐸𝑋，方差𝐷𝑋，自协方差 𝑐𝑜𝑣(𝑎, 𝑏)与自相关系数𝑝(𝑎, 𝑏)，它们也叫做特征统计量。对于时间序列分析的问题， 首先会通过分析这些统计量表现出的一些特性，加以推断出某个序列的性质。均值

8

北京交通大学硕士专业学位论文

相关技术概论

计算由公式(2-8)：


 t = ESt = − sdFt (s)

其中时刻点𝑡取所有的观察时刻，然后计算得到一个期望函数序列{𝑢𝑡}，{𝑢𝑡}反 映的是时间序列{𝑆(𝑡), 𝑡 ∈ 𝑇}的平均水平。

方差计算由公式(2-9)：

 

2 t

=

DSt

=

E (St

− t

)2

=

 −

(

s

−

t

)2dFt

(s)

当时刻点取得所有的时刻时，得方差函数序列 { t2} 。 自协方差函数和自相关系数计算由公式(2-10)(2-11)：
 (t, a) = cov (St , Sa ) = E (St − t )(Sa − a )
(t, a) =  (t, a) DSt  DSa
公式(2-11)中𝛾(𝑡, 𝑎)是时间序列{𝑆𝑡}自协方差的函数，而𝜌(𝑡, 𝑎)为序列{𝑆𝑡}的自 相关函数。它们是度量两个不同随机事件彼此之间的相互影响程度

对于已经平稳的时间序列来说，根据约束条件的严格程度，可以将平稳时间序

列又分为俩大类：严平稳，宽平稳。而在实际应用问题中是很难确定严格平稳时间

序列的概率分布的。

接下来介绍差分运算：

（1）𝑝阶差分

差分就是对相距一个时刻的两个序列值之间进行求差运算，其中 st 为 st 差分
一次，公式为： △𝑆𝑡= 𝑆𝑡 − 𝑆𝑡−1 （2）𝑞步差分
q 步差分相距 q 个时刻的两个序列值求差分运算。常用在时间序列有季节性特
征。公式记为 qst = st − st−q ，为 qst 为 st 的 q 步差分。
把当前时间序列值乘以延迟算子，就等于把当前时间序列值得时间值向过去

拨一个时刻。延迟算子记为 B ，计算由公式(2-12)：
st−1 = Bst

st−k = Bk st−k
延迟算子一般性质： （1）𝐵0 = 1； （2）若𝑐为常数， 𝐵(𝑐 × 𝑆𝑡) = 𝑐 × 𝐵(𝑠𝑡) = 𝑐 × 𝑠𝑡−1； （3）对任意两个序列{𝑥𝑡}和{𝑠𝑡}，有𝐵(𝑥𝑡 ± 𝑠𝑡) = 𝑥𝑡−1 ± 𝑠𝑡−1； （4）𝐵𝑛𝑠𝑡 = 𝑠𝑡−𝑛；

9

北京交通大学硕士专业学位论文

相关技术概论

（5）(1 − 𝐵)𝑛 = ∑𝑛𝑖=0(−1)𝑖𝐶𝑛𝑖 𝐵𝑖 , 𝐶𝑛𝑖 = 𝑛!/(𝑛 − 1)!； 用延迟算子表示差分运算：

（1）𝑝阶差分计算见公式(2-13)：

p

  pst = (1− B) p st =

(−1)iC

i p

st

−i

i=0

（2）𝑞步差分计算见公式(2-14) qst = st − st−q = (1− B)q st

2.3.2 ARIMA 模型

首先 ARIMA 模型由自回归 AR 模型，移动平均 MA 模型，数次差分系数三部

分组成。将自回归模型、移动平均模型和差分法结合，就得到了差分自回归移动平

均模型 ARIMA(p,d,q)，其中 d 是需要对数据进行差分的阶数[38]。模型的识别问题

和定阶问题，主要是确定 p, d, q 三个参数，差分的阶数 d 一般通过观察获取，1 阶

或 2 阶即可。 p 和 q 的确定。我们首先介绍两个函数。

𝐴𝑅(𝑝)自回归模型计算由公式(2-15)：

xt = t + 0 + 1xt−1 + 2 xt−2 + + p xt− p

p  0

 

E

(t

)

=

0,

Var

(t

)

=



2 

,

E (ts ) = 0,

 

E

(

xs

t

)

=

0,

s  t

    s  t  

AR( p) 模型有三个限制条件：
（1）𝜙𝑝 ≠ 0，这个条件保证自回归模型的最高阶数为 p ；
（2）𝐸(𝜀𝑡) = 0, 𝑉𝑎𝑟(𝜀𝑡) = 𝜎𝜀2, 𝐸(𝜀𝑡𝜀𝑠) = 0, 𝑠 ≠ 𝑡这个条件要求随机干扰序列
{𝜀𝑡}是服从均值为零的正态分布，保证了  t 的随机性；
（3）𝐸(𝑥𝑠𝜀𝑡) = 0，这个条件意味着当前时刻的随机干扰项与其他时刻的序列 值是没有关系的。
通常会省掉公式(2-15)的限定条件，𝐴𝑅(𝑝)模型见公式(2-16)：
xt = 0 +1xt−1 +2xt−2 + +p xt−k + t

当𝜙0 = 0时，自回归模型又称为中心化𝐴𝑅(𝑝)模型。非中心化序列可以使用变

换见公式(2-17)转化为中心化的𝐴𝑅(𝑝)序列：

=

0

,

1−1 − −p

xt = xt − 

则{𝑥𝑡′}序列是将{𝑥𝑡}中心化的序列的结果。中心化变换操作就是将非中心化时

10

北京交通大学硕士专业学位论文

相关技术概论

间序列平移一个常数单位距离，显然这样的操作对时间序列值之间的相关性是无 任何影响的，所以在之后分析自回归模型的相关性质时，都可以简化成对其中心化 的模型进行分析[38-39]。
所以中心化𝐴𝑅模型引入延迟算子后记为𝑝阶自回归系数多项式见公式(2-18)：
(B) = 1−1B − −pB p

接下来介绍𝑀𝐴模型，𝑞阶移动平均模型记为𝑀𝐴(𝑞)，𝑀𝐴(𝑞)有以下结构见公

式(2-19)：

xtq

= 0

+

t

− 1 t −1

−  2 t −2

−

− q t −q

  

 E

(

t

)

=

0,

Var

(t

)

=



2 

,

E

(t

s

)

=

0,

s



t

 

其中：

（1）𝜃𝑞 ≠ 0，这个限制条件保证模型最高阶数为 q 。
（2）𝐸(𝜀𝑡) = 0, 𝑉𝑎𝑟(𝜀𝑡) = 𝜎𝜀2, 𝐸(𝜀𝑡𝜀𝑠) = 0, 𝑠 ≠ 𝑡，保证了随机干扰序列{𝜀𝑡}为 0均值噪声序列。

ARIMA 模型，即为 AR 模型与 MA 模型的结合，记为𝐴𝑅𝑀𝐴(𝑝, 𝑞)，计算由公

式(2-20)：

xt = 0 + 1xt−1 + 2 xt−2 + + p xt− p + t −1t−1 −2t−2 −

p  0,q  0

 E

(t

)

=

0,

Var

(t

)

=



2 

,

E

(t

s

)

=

0,

s



t

E ( xst ) = 0, s  t

−qt−q       

所以，对于一个 ARMA 模型，令𝑍𝑡 = 𝜃(𝐵)𝜀𝑡，则可表示为 (B)xt = zt 。
综合研究 AR 模型，MA 模型和 ARMA 模型自相关系数和偏相关系数，则推出 表 2-3 结论：

表 2-3 模型的自相关系数与偏自相关系数的性质

Table 2-3 Properties of autocorrelation and partial autocorrelation coefficients in different models

模型

自相关系数

偏自相关系数

AR( p)

拖尾

p 阶拖尾

MA(q)

q 阶拖尾

拖尾

ARMA( p, q)

拖尾

拖尾

（1）𝑝阶自回归模型 AR(p) AR(p)模型的截尾性就是该模型的偏自相关函数 PACF 在𝑝阶之后应为零。 AR(p)模型具有拖尾性意思就是该模型的自相关函数 ACF 不应该在某一步之
11

北京交通大学硕士专业学位论文

相关技术概论

后为零（某步就是该模型的截尾），而是按指数、正弦波形式衰减。 （2）𝑞阶移动平均模型 MA(q) MA(q)模型的截尾性就是模型的自相关函数 ACF 在𝑞阶之后应为零。 MA(q)模型具有拖尾性就是模型的偏自相关函数 PACF 不应该在某一步之后
为零（截尾），而是按指数衰减、正弦波形式衰减 [38-40]。
2.4 神经网络预测模型
主要介绍神经网络的基本概念，以及本研究用到的深度置信网络。
2.4.1 神经网络概述
经典的神经网络是一个包含三个层次的神经网络。包括输入层，输出层，隐 藏层[41]。

图 2-1 神经网络结构 Figure 2-1 Neural network structure
一个神经网络的输入层与输出层的节点数一般依据研究问题在实验开始前时 就确定了，中间层结构包括中间层神经元个数以及连接权重则需通过某种算法进 行确定；如图 2-1 输入层有 3 个输入单元，隐藏层有 4 个单元，输出层有 2 个单 元[41-43]。
图 2-2 是一个典型的神经元模型。用𝑎来表示输入，用𝜔来表示权值。一个表 示连接的有向箭头解释为在输入端信号大小是𝑎，中间有权值𝜔，神经元输出时信 号计算方式为𝑎 × 𝜔。
12

北京交通大学硕士专业学位论文

相关技术概论

图 2-2 神经元结构 Figure 2-2 Neuronal structure
2.4.2 深度置信网络
深度置信网络是概率生成模型，基本原理就是通过联合概率分布推断出数据 样本分布[44]。由受限玻尔兹曼机(Restricted Boltzmann Machine, RBM)堆积而成， 对于一个训练好的受限玻尔兹曼机，它的隐层节点输出即为更深一层的受限玻尔 兹曼机的可见节点的输入。

图 2-3 RBM 结构图
Figure 2-3 Structure of RBM
图 2-3 所示一个 RBM 是无向图模型，RBM 结构图中层内的神经元之间无连 接，RBM 内可见层与隐藏层之间由无向权重𝜔连接[44-46]。
如图 2-4，DBN 模型构建在于固定第一个训练好的 RBM 的权重和偏置，将其 隐层节点输出作为第二个 RBM 的可见节点的输入，对第二个 RBM 进行训练后堆 叠于第一个 RBM 上，对于多层 RBM 重复上述过程。Hinton G，Osindero S 等人 训练神经网络的方法为快速贪婪学习算法，Hinton G 提出对比发散算法来更新可 见层节点与隐藏层节点连接权值[44-46]，步骤如下：
13

北京交通大学硕士专业学位论文

相关技术概论

图 2-4 DBN 结构图 Figure 2-4 DBN structure

步骤 1 输入训练数据集，记为𝑋𝑠；将𝑋输入到第一个 RBM 的可见层𝑣1；便于 迭代描述即为𝑣𝑖, 𝑖 = 1,2,3 …；
步骤 2 计算该数据集使得隐层节点ℎ𝑗，开启的条件概率见公式(2-21)：

( ) P

hj =1| v

=

Sigm

  

V
 i=1

wij

vi

+

a

j

  

步骤 3 由公式(2-21)计算来的ℎ𝑗，重构显层𝑣𝑖+1见公式(2-22)：

( ) H



P vi =1| h = Sigm j=1wijh j + bi 

其中𝑠𝑖𝑔𝑚(. )为 sigmoid 函数，𝑎和𝑏为偏差；可见层节点与隐藏层节点为二进 制点即𝑣𝑖, ℎ𝑗𝜖{0,1}；
步骤 4 再由公式(2-23)， 𝑣𝑖+1计算后得到ℎ𝑗+1；则连接权重更新为：
( ) wij =  E vihj  − E vi+1hj+1 

其中，𝜀为学习率； 𝐸[. ]为期望。 步骤 5 生成可见节点𝑣的概率见公式(2-24)：

P(v) = P(h |)P(v | h,)

步骤 6 DBN 条件概率分布是由公式(2-25)来定义：

VH

V

H

    E(v, h | ) = −

wijvihj − bivi − a jhj

i=1 j=1

i =1

j =1

14

北京交通大学硕士专业学位论文

相关技术概论

2.5 回归算法衡量指标

主要介绍衡量模型预测准确度的常用的评价指标。 假设：预测值为𝑌̂ = {𝑦̂1, 𝑦̂2, … , 𝑦̂𝑛}；真实值为𝑌 = {𝑦1, 𝑦2, … , 𝑦𝑛}。

2.5.1 MSE 均方误差

均方误差(Mean Squared Error, MSE)

 MSE

=

1 n

n i=1

(

yˆi

−

yi

)2

MSE 为真实值与预测值差平方的期望，取值越大则说明该模型预测效果越差。

2.5.2 RMSE 均方根误差

 RMSE =

1 n

n i=1

(

yˆi

−

yi

)2

均方根误差(Root Mean Square Error, RMSE)，其实就是 MSE 加了个根号，这 样数量级上比较直观，比如 RMSE=15 可以认为回归效果相比真实值平均相差 15。 RMSE 取值范围[0,+∞)，当预测值与真实值完全相等时该值等于 0，即完美模型； 误差越大，该值越大。

2.5.3 R 方决定系数
RMSE 和 MSE 有局限性，同一个算法模型，解决不同的问题，不能体现此模 型针对不同问题所表现的优劣。因为不同实际应用中，数据的量纲不同，无法直 接比较预测值，因此无法判断模型更适合预测哪个问题[47-48]。
𝑅2决定系数的优势为将预测结果转换为准确度，结果都在[0,1] 之间，针对不
同问题的预测准确度统一量纲，可以比较并来判断此模型更适合预测哪个问题[49]。 计算由公式(2-28)为：
R2 =1−  
其中公式𝜌 = ∑(𝑦̂(𝑖) − 𝑦(𝑖))2是设计的预测模型预测数据与实际数据的误差， 𝜌̅ = ∑(𝑦̅ − 𝑦(𝑖))2是实际数据的平均值与实际数据的误差，表示设计的模型没有

15

北京交通大学硕士专业学位论文

相关技术概论

拟合住的数据，因此𝑅2决定系数可以理解为设计的预测模型拟合住的数据。 由公式(2-28)相关推论有： （1）𝑅2 ≤ 1； （2）𝑅2值越大设计的模型预测准确度越高，当设计的预测模型与实际数据一
致时：𝑅2 = 1； （3）当设计的模型等于基准模型时：𝑅2 = 0，见公式(2-28)中基准模型为原
始数据集的平均值； （4）如果𝑅2 < 0，说明学习到的模型还不如基准模型。
2.6 本章小结
本章描述了本研究所涉及的相关技术及算法，包括一些相关系数计算，粒子群 优化算法，线性时间序列算法及深度学习在时间序列上的应用及模型好坏的评价 方法为本研究提供理论基础。

16

北京交通大学硕士专业学位论文

基于改进粒子群优化算法的 DBN 预测模型研究

3 基于改进粒子群优化算法的 DBN 预测模型研究
本章首先提出基于三大策略的改进的粒子群优化算法（Sigmoid-OAPSO），后 采集铁路集装箱发送量相关影响因素，并以集装箱运量、某区域集装箱运量为实验 例子计算与集装箱运量的 Spearman rank 相关系数，并通过 Spearman rank 相关系 数分析结果选择相关程度高的影响因素数据作为训练深度置信网络的输入数据并 通过改进的粒子群优化算法（Sigmoid-OAPSO）优化并得到全国集装箱运量和某区 域集装箱运量深度置信网络预测模型，即得到全国铁路集装箱运量和某区域集装 箱运量预测的深度置信网络模型。

3.1 数据准备与环境
本节介绍数据准确情况与实验环境。

3.1.1 原始数据与实验环境

本研究实验数据为集装箱货物发送情况的记录数据，以及相关的发站，到站代

码数据，目前共有 4276 个车站。原始实验数据有 302995984 条目天度数据，时间

跨度为 2007 年 1 月到 2018 年 4 月中旬，共 2.52G。在研究数据过程中发现，实际

记录数据的箱型有 10ft 箱，20ft 箱，25ft 箱，40ft 箱，45ft 箱，48ft 箱，50ft 箱，

这是因为在铁路集装箱运输发展过程中最早期箱型应用 20 世纪 80 至 90 年代的

10ft 集装箱，以及 20 世纪 90 年代以后的 20ft、40ft 国际标准集装箱。随着集装箱

运输的蓬勃发展，近年来我国研究设计并实际生产应用了 20 ft、45 ft 内陆标准集

装箱还有 20 ft、35ft 敞顶箱和 45 ft、34ft 通用箱。为更好的做集装箱运量预测，本

实验统一运量公式为： N = ( / 20 n ) ，其中𝑁为集装箱运量，单位为标准箱
(TEU)， 为箱型尺寸，n 为该箱型尺寸的数量。本研究中的其他实验处理相同问 题用的同一种方法。本实验所有实验数据统一为集装箱运量预测模型训练数据为

2007 年 1 月至 2016 年 12 月，共 10 年 120 个月；测试数据为 2017 年 1 月至 2018

年 3 月，共 15 个月。标准箱（Twenty-feet Equivalent Unit, TEU）就是以规格为 20

英尺的集装箱为一标准箱。用来衡量船舶等运载工具集装箱装载能力和港口吞吐

量。所以本研究在实验时需要将箱数转换为 TUE，转换公式见公式（3-1）。

 N= (n20 + n40  2 + n45  2.25)

(3-1)

17

北京交通大学硕士专业学位论文

基于改进粒子群优化算法的 DBN 预测模型研究

其中 n20 为 20 英尺箱的个数， n40 为 40 英尺箱的个数， n45 为 45 英尺箱的个
数。
装箱货物发送情况的记录数据及相关数据分别如表 3-1 所示：

发站代码 34502 23441 25618

表 3-1 铁路集装箱运货情况历史数据结构表

Table 3-1 Historical data structure of railway container freight situation

到站代码

箱型代码

中心记录发送时间 总箱数

76548

20

17-01 月-01

10

24529

40

11-05 月-09

80

24662

40

08-07 月-02

14

实验环境如表 3-2，表 3-3，后面所有实验同本实验环境相同。 硬件环境如表 3-2：

内存 16G

表 3-2 实验硬件环境

Table 3-2 Experimental hardware environment

存储空间

处理器

CPU 核数

1T+256G

Corei5-8250U

4

逻辑处理器 8

实验软件环境如表 3-3 所示：

表 3-3 实验软件环境

Table 3-3 Experimental software environment

软件包名

软件名称

版本

安装目录

mysql-5.6.37-linux-glibc2.12x86_64.tar.gz
jdk-7u80-linux-x64.tar.gz mysql-connector-java-5.1.43-bin.jar
—

MySQL
Java 软件开发 MySQL JDBC 驱动 Python 软件开发工具包

5.6.37
1.7.80 5.1.43
—

/usr/local/mysq]
/usr/local/jdkl.7.0_80 — —

3.1.2 相关因素数据准备
影响因素相关数据来源于国家统计局网站，分析时间跨度为 2007 年 1 月到 2018 年 3 月的月度数据。影响因素分工业、能源、国内贸易、对外经济、邮政通 信、财政六大类，39 个具体影响指标。
（1）工业产品
18

北京交通大学硕士专业学位论文

基于改进粒子群优化算法的 DBN 预测模型研究

铁矿石原矿产量（万吨）；磷矿石产量（万吨）；原盐产量（万吨）；饲料产 量（万吨）；精制食用植物油产量（万吨）；成品糖产量（万吨）；乳制品产量（万 吨）；酒（白酒、啤酒、葡萄酒）产量（万千升）；饮料产量（万吨）；卷烟产量 （亿支）；纱（万吨）；布（亿米）；新闻纸产量（万吨）；化学品（硫酸、烧碱、 纯碱、乙烯、化学农药原药）产量（万吨）；塑料（初级形态塑料和塑料制品）产 量（万吨）；合成橡胶产量（万吨）；药品（化学药品原药、中成药）产量（万吨）； 纤维（合成纤维、化学纤维）产量（万吨）；玻璃（钢化玻璃、夹层玻璃、中空玻 璃）产量（万平方米）；平板玻璃(万重量箱)；金属制品（生铁、粗刚、钢材、钢 筋、线材、冷轧薄板、铁合金、氧化铝、十种有色金属、精炼铜、铅、锌、原铝、 铝合金、铜材、铝材）产量（万吨）；电子计算机整机、微型计算机、手持通信设 备产量（万台）；集成电路（亿块）；移动通信基站设备（万信道）
（2）能源 发电量（亿千瓦时）；焦炭（万吨）；原油（万吨）；原油加工量（万吨） （3）国内贸易 社会消费零售总额（亿元）；沿海规模以上港口吞吐量（万吨）；外贸货物吞 吐量（万吨）； （4）对外经济 进出口总值（千美元）；出口总值（千美元）；进口总值（千美元） （5）邮政通信 邮政业务总量（亿元）；电信业务总量（亿元） （6）财政 国家财政预算收入（亿元）；国家财政预算支出（亿元）

3.1.3 数据统一化

集装箱运量与相关影响因素数据等时间序列数据都需要统一规范化处理，由 公式(3-2)来统一处理。

xi

=

xi xmax

(3-2)

其中 xi 为规范处理后的值； xi 为原始时间序列数据； xmax 为该时间序列数据
的最大值。

19

北京交通大学硕士专业学位论文

基于改进粒子群优化算法的 DBN 预测模型研究

3.2 构造改进的粒子群优化算法
自适应粒子群优化仍然保留了初始参数设置的问题。如果这些参数没有正确 设置，收敛速度会变慢，特别是当搜索接近全局最优时。由图 3-1 所展示，根据 Sigmoid 函数特征当随机选取数作为自变量取在[-5,5]时自变量才可取到[0,1]的数， 创新的提出使用 Sigmoid 随机变量而不是均匀分布的随机变量来避免粒子群优化 算法陷入局部最小。

图 3-1 Sigmoid 函数图 Figure 3-1 Sigmoid function

引入 Sigmoid 随机变量，计算粒子的新速度和新位置，为了得到了粒子的速 度和新位置方程同时为了跳出局部最优解，结合了两个策略得到改进粒子群优化

算法（Sigmoid-OAPSO, SOAPSO），粒子更新位置与速度的迭代计算见公式(3-3)：

𝑉𝑖𝑘+1 = 𝜆 × 𝑉𝑖𝑘 + 𝑐1 × 𝑆𝑖𝑔 × (𝑝𝑏𝑒𝑠𝑡 − 𝑋𝑖𝑘) + 𝑐2 × 𝑆𝑖𝑔 × (𝑔𝑏𝑒𝑠𝑡 − 𝑋𝑖𝑘)

(3-3)

𝑋𝑖𝑘+1 = 𝑋𝑖𝑘 + 𝑉𝑖𝑘+1

(3-4)

其中，𝑆𝑖𝑔(𝑢) = 1/(1 + 𝑒−𝑢)；每个粒子获得的最佳值被存储为𝑝𝑏𝑒𝑠𝑡，而所

有𝑝𝑏𝑒𝑠𝑡中的最佳值被存储在𝑔𝑏𝑒𝑠𝑡。

（1）避免参数随机初始值而造成在搜索全局最优解耗时多，迭代次数多的问

题在设置粒子群位置初试值时为 [𝑋𝑖𝐿, 𝑋𝑖𝐻]区间的随机值。 （2）提出空间位置超边界处理策略来降低陷入局部最优解的风险：见公式(3-

5)中 [𝑈𝑖𝐿, 𝑈𝑖𝐻]为第𝑖个粒子的维度的搜索边界， 𝑥𝑗,𝑖为粒子位置；

xi j

=

2U  2U

L i H i

− −

xi j
xi j

x U i

L

j

i

x U i

H

j

i

(3-5)

20

北京交通大学硕士专业学位论文

基于改进粒子群优化算法的 DBN 预测模型研究

3.3 基于改进粒子群优化算法的 DBN 构造过程
输入影响指标数据，准备基本深度置信网络结构；预估粒子群规模和迭代次 数；预估每个粒子的初始位置和速度。确定最小训练误差；

图 3-2 Sigmoid-OAPSO 优化 DBN 的过程流程图 Figure 3-2 Flowchart of the optimised DBN using Sigmoid-OAPSO
使用 MSE 对每个粒子进行评估，并从粒子的历史和群集的最佳粒子位置找到 一个粒子的最佳位置；更新所有粒子的位置和速度；直到找到 MSE 最小时粒子的 位置，此时粒子位置为全局最优解，这时就是深度置信网络结构的参数解，此时 说明铁路集装箱运量预测深度置信网络模型构成。
21

北京交通大学硕士专业学位论文

基于改进粒子群优化算法的 DBN 预测模型研究

3.4 基于改进粒子群优化算法的 DBN 某区域集装箱运量预测研 究

本节首先计算了某区域的集装箱运量与相关影响指标的 Spearman 秩相关系数， 并利用 SOAPSO 优化深度置信网络，并找到当深度置信网络预测模型预测效果最 好时深度置信网络的结构。

3.4.1 Spearman 秩相关系数

表 3-4 为某区域相关影响因素与铁路集装箱运量的 Spearman 秩相关系数值表。 显然磷矿石、焦炭，平板玻璃，外贸货物吞吐量、国家财政预算收入与集装箱运 量的相关程度最高， Spearman rank 相关系数值分别为 0.893958、0.884080、 0.859669、0.888575、0.882430、0.793861。纤维、玻璃与某区域集装箱运量相关 程度最低，Spearman rank 相关系数分别为 0.186214、0.049815。乳制品、电信业 务总量与集装箱运量呈负相关，Spearman rank 相关系数为-0.119300、-0.306046。

表 3-4 某区域相关影响因素与某区域铁路集装箱运量的 Spearman 秩相关系数

Table 3-4 Spearman rank correlation coefficient between the influencing factors in a certain

region and the volume of railway container in a certain region

类型

影响因素

工业主要产品

铁矿石原矿 磷矿石 原盐 饲料
精制食用植物油 成品糖
乳制品 酒类 饮料 卷烟 纱 布
新闻纸 化学品
塑料 药品 纤维

与集装箱运量 相关程度
0.691546 0.893958 0.562577 0.596216 0.586771 0.624665 -0.119300 0.494905 0.510539 0.639067 0.789443 0.404332 0.557889 0.568367 0.798088 0.625529 0.186214

22

北京交通大学硕士专业学位论文

基于改进粒子群优化算法的 DBN 预测模型研究

表 3-4 （续） 某区域相关影响因素与某区域铁路集装箱运量的 Spearman 秩相关系数

Table 3-4 (Continue) Spearman rank correlation coefficient between the influencing factors in a

certain region and the volume of railway container in a certain region

类型

影响因素

与集装箱运量

相关程度

玻璃

0.049815

能源
国内贸易 对外经济 邮政通信
财政

平板玻璃 金属制品 移动通信基站设备 集成电路 电子计算机整机、微型计算机、手持通信设备
焦炭 原油 汽油 发电量 原油加工量 社会消费零售总额 沿海规模以上港口吞吐量 外贸货物吞吐量 进出口总值 出口总值 进口总值 邮政业务总量 电信业务总量 国家财政预算收入

0.859669 0.754643 0.632831 0.569795 0.567323 0.884080 0.519621 0.652273 0.544946 0.402972 0.398598 0.401447 0.888575 0.677634 0.506612 0.582623 0.811951 -0.306046 0.882430

国家财政预算支出

0.419610

由表 2-2 所示，我们一般采取相关系数值为强和非常强的程度为深度置信网络 的输入数据，这是因为相关程度越高深度置信网络预测的数据与某区域集装箱运 量数据值就越接近。而除了上述四个影响因素其他影响因素的 Spearman 系数在 0.4 到 0.8 之间，表明与某区域集装箱运量的相关程度较高，可作为利用深度置信网 络预测某区域集装箱运量的训练数据，所以当利用深度置信网络对月度集装箱发 送量预测时，除去纤维、玻璃、乳制品、电信业务总量，这四个与某区域集装箱运 量相关度低或者负相关的影响因素，共有 34 个与某区域集装箱运量相关程度高的 影响因素，可作为训练深度置信网络的输入数据。

3.4.2 模型参数选择与优化
实验的硬件环境与软件环境与 3.1.1 相同，不在赘述。某区域铁路集装箱运量 深度置信网络预测模型参数设置如表 3-5。如表 3-5 显示，有 34 个影响因素与集 装箱发送量相关程度高，所以 DBM 的输入层神经元个数为 34，输出只有某区域

23

北京交通大学硕士专业学位论文

基于改进粒子群优化算法的 DBN 预测模型研究

铁路集装箱运量，所以输出层神经元个数为 1。RBMs 为 3 个，即为三个隐层。每 个 RBM 迭代次数为 38。隐层的神经元个数通过 SOAPSO 优化得来，取值范围都 为 1 到 30。DBN 的学习率为 0.01，DBN 的学习率和动量代表了 RBM 和 BP 算法 的学习率和动量。收敛误差和 BP 算法的迭代次数为 0.001 和 180。粒子群优化算 法中粒子数为 10，迭代次数为 30，迭代权值初始值 0.9，线性迭代权值 0.4，惯性 系数非线性自相关系数为 10，惯性系数迭代次数为 13。

表 3-5 某区域铁路集装箱运量深度置信网络预测模型参数表

Table 3-5 Parameters of prediction model of depth confidence network for railway container volume

参数名称

数学符号/取值范围

取值

输入层神经元个数

—

34

输出层神经元个数

—

1

RBMS 个数

—

3

每个 RBM 迭代次数 第一和第二隐层神经元个数

— ni(1 ni  30,i =1,2)

38 通过 SOAPSO 训练
取得

第三隐层的神经元个数

n3 (0  n3  30)

通过 SOAPSO 训练 取得

DBN 学习率

 1

BP 算法的收敛误差

e

BP 算法的迭代次数

—

SOAPSO 粒子数

S

0. 01 0.001 180
10

SOAPSO 迭代次数

l

30

SOAPSO 迭代权值初始值

q 0

0.9

SOAPSO 线性迭代权值

q 1

0.4

SOAPSO 惯性系数非线性自相

k

10

关系数

SOAPSO 惯性系数迭代次数

f 1

13

图 3-6 SOAPSO-DBN 模型某区域集装箱运量训练数据集上的预测 Figure 3-6 SOAPSO-DBN Model prediction results
24

北京交通大学硕士专业学位论文

基于改进粒子群优化算法的 DBN 预测模型研究

影响因素指标和集装箱发送量训练数据时间跨度为 2007 年 1 月至 2016 年 12 月，共 10 年 120 个月。通过 SOAPSO 优化 DBN，当 DBN 结构为第一隐层 15 个
神经元，第二隐层 23 个神经元，第三隐层 17 个神经元时，预测准确度 R2 衡量指
标最大，为 0.6165。图 3-6 为 DBN 模型结构（34-15-23-17-1）在某区域集装箱运 量训练数据集上的预测结果。
3.4.3 预测结果展示
测试数据为 2017 年 1 月至 2018 年 3 月，共 15 个月。图 3-7 为 DBN 模型结
构（34-15-23-17-1）在某区域集装箱运量测试数据集上的预测结果，预测准确度 R2
决定系数为 0.7165。

图 3-7 SOAPSO-DBN 模型预测某区域集装箱运量结果 Figure 3-7 SOAPSO-DBN Model predicts the results of container traffic in a certain region
3.5 基于改进粒子群优化算法的 DBN 全国集装箱运量预测研究
首先计算了全国集装箱运量与相关影响指标的 Spearman 秩相关系数，并利用 SOAPSO 优化深度置信网络，并找到当深度置信网络预测模型预测效果最好时深 度置信网络的结构。
3.5.1 Spearman 秩相关系数
如表 3-6 所示，集成电路、塑料，平板玻璃，纤维产量和发电量与集装箱发送 量 的 相 关 程 度 最 高 ， Spearman rank 相 关 系 数 分 别 为 0.819916 、 0.808568 、
25

北京交通大学硕士专业学位论文

基于改进粒子群优化算法的 DBN 预测模型研究

0.791510、0.784969、0.793861。原油产量、电信业务量与集装箱发送量相关程度 最低，Spearman rank 相关系数分别为 0.276073、0.198187。新闻纸产量与集装箱 发送量呈负相关，Spearman rank 相关系数为-0.630439。其他影响因素的 Spearman 系数在 0.6 到 0.8 之间，表明与集装箱发送量的相关程度较高，可作为利用深度置 信网络预测集装箱发送量的训练数据，所以当利用深度置信网络对月度集装箱发 送量预测时，除去原油产量、电信业务量、新闻纸产量，这三个与集装箱运量相 关度低或者负相关的影响因素，共有 35 个与集装箱发送量相关程度高的影响因素。

表 3-6 相关影响因素与铁路集装箱运量的 Spearman 秩相关系数

Table 3-6 Spearman rank correlation coefficient between correlation factors and railway

类型 工业主要产
品
能源 国内贸易

container volume 影响因素
铁矿石原矿 磷矿石 原盐 饲料
精制食用植物油 成品糖
乳制品 酒类 饮料 卷烟 纱 布
新闻纸 化学品
塑料 药品 纤维 玻璃 平板玻璃 金属制品 移动通信基站设备 集成电路 电子计算机整机、微型计算机、手持通信设备 焦炭 原油 汽油 发电量 原油加工量 社会消费零售总额

与集装箱运量 相关程度
0.594491
0.781148
0.161132
0.778882
0.731692
0.019024 0.797393 0.319723 0.716576 0.150802 0.780169 0.647977 -0.630439 0.785795 0.808568 0.739401 0.784969 0.620988 0.791510 0.712158 0.666198 0.819916 0.771077 0.563733 0.276073 0.749210 0.793861 0.776906 0.757690

26

北京交通大学硕士专业学位论文

基于改进粒子群优化算法的 DBN 预测模型研究

表 3-6（续） 相关影响因素与铁路集装箱运量的 Spearman 秩相关系数

Table 3-6 (Continue) Spearman rank correlation coefficient between correlation factors and

类型
对外经济 邮政通信
财政

railway container volume 影响因素
沿海规模以上港口吞吐量 外贸货物吞吐量 进出口总值 出口总值 进口总值 邮政业务总量 电信业务总量 国家财政预算收入 国家财政预算支出

与集装箱运量 相关程度
0.755112 0.753051 0.656061 0.681528 0.613334 0.736102 0.198187 0.653471 0.754711

3.5.2 模型参数选择与优化

实验的硬件环境与软件环境与 3.1.1 相同，不在赘述。铁路集装箱运量深度置 信网络预测模型参数设置如表 3-7 显示，有 35 个影响因素与集装箱发送量相关程 度高，所以 DBM 的输入层神经元个数为 35，输出只有集装箱运量，所以输出层 神经元个数为 1。RBMs 为 3 个，即为三个隐层。每个 RBM 迭代次数为 35。隐层 的神经元个数通过 SAPSO 优化得来，取值范围都为 1 到 30。DBN 学习率为 0.1， DBN 的学习率和动量代表了 RBM 和 BP 算法的学习率和动量。收敛误差和 BP 算 法的迭代次数为 0.001 和 180。粒子群优化算法中粒子数为 10，迭代次数为 30， 迭代权值初始值 0.7，线性迭代权值 0.6，惯性系数非线性自相关系数为 10，惯性 系数迭代次数为 10。

表 3-7 铁路集装箱运量深度置信网络预测模型参数表

Table 3-7 Parameters of the prediction model of the depth confidence network of railway

参数名称 输入层神经元个数 输出层神经元个数
RBMS 个数 每个 RBM 迭代次数 第一和第二隐层神经元个数 第三隐层的神经元个数
DBN 学习率

container volume 数学符号/取值范围 — — — —
ni(1 ni  30,i =1,2)
n3 (0  n3  30)
𝛼1

取值 35 1 3 35 通过 SOAPSO 训练 通过 SOAPSO 训练
0. 1

27

北京交通大学硕士专业学位论文

基于改进粒子群优化算法的 DBN 预测模型研究

表 3-7 （续） 铁路集装箱运量深度置信网络预测模型参数表

Table 3-7 (Continue) Parameters of the prediction model of the depth confidence network of

railway container volume

参数名称

数学符号/取值范围

BP 算法的收敛误差

e

BP 算法的迭代次数

—

Sig-OAPSO 粒子数

S

Sig-OAPSO 迭代次数

l

Sig-OAPSO 迭代权值初始值

q 0

Sig-OAPSO 线性迭代权值

q 1

Sig-OAPSO 惯性系数非线性自

k

相关系数

Sig-OAPSO 惯性系数迭代次数

f 1

取值 0.001 180
10 30 0.7 0.6 10
10

影响因素指标和集装箱发送量训练数据为 2007 年 1 月至 2016 年 12 月，共 10 年 120 个月。图 3-8 为 DBN 模型结构为（35-13-17-22-1）预测效果图，既输入数 据为相关影响因素数据输入层神经元个数为 35，通过 SOAPSO 优化计算，当第一 隐层神经元个数为 13，第二隐层神经个数为 17，第三隐层神经元个数为 22 时在
训练数据集预测准确度 R2 决定系数上最大为 0.6378，所以认为 SOAPSO 寻找到
DBN 模型的全局最优解。

图 3-8 深度置信网络模型在训练集预测集装箱运量结果 Figure 3-8 DBN Model forecast container traffic results in training set
3.5.3 预测结果展示
测试数据为 2017 年 1 月至 2018 年 3 月，共 15 个月。图 3-9 为 DBN 模型结 构（35-13-17-22-1）在集装箱运量测试数据集上的预测结果，此时预测准确度𝑅2决 定系数为 0.6729。
28

北京交通大学硕士专业学位论文

基于改进粒子群优化算法的 DBN 预测模型研究

图 3-9 深度置信网络模型测试集预测集装箱运量结果 Figure 3-9 DBN Model test sets predict container traffic results
3.6 本章小结
本章首先介绍提出的基于三个策略的改进版粒子群优化算法，介绍了利用改 进版粒子群优化算法构建深度置信网络结构的过程；再在铁路集装箱运量数据和 某区域铁路集装箱运量数据集上进行实验。首先在国家统计局网站上采集相关影 响指标数据，并与某区域和全国铁路集装箱运量数据计算之间的 Spearman 秩相关 系数，选取 Spearman 相关系数值高的作为训练某区域和全国铁路集装箱运量深度 置信网络的输入数据，利用改进的粒子群优化算法优化深度置信网络结构。

29

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

4 基于改进混合模型的集装箱运量预测研究
本章提出以第三章，第四章得出的某区域的 ARIMA 模型及深度置信网络预 测模型为基础的混合方法而构造的混合模型。就是对于子模型的权重训练数据集 上继续进行 ARIMA 拟合预测，从而提高混合模型预测的准确率，减少误差，并 在测试数据集上验证，并最终得到预测准确率高的预测模型。

4.1 改进的混合模型研究

图 4-1 改进的混合模型实验过程示意图 Figure 4-1 Improved flow chart of hybrid model experiment

步骤 1 原始数据与相关因素分析：收集原始货运量数据，包括铁路集装箱运

量和相关影响因素指标数据。然后计算它们之间的 Spearman 等级关系度。

步骤 2 子模型拟合与训练：使用 ARIMA 对训练数据进行拟合，根据原始数据

差分情况、AIC 取值确定参数𝑝, 𝑑, 𝑞。同样，通过 Sigmoid-OAPSO 优化 DBN 模型。

DBN 的输入为影响铁路集装箱运量的相关因素指标，输出为月度铁路集装箱运量。

通过 Sigmoid-OAPSO 可以获得 DBN 预测模型的参数。

步骤 3 计算子模型权重：时间序列数据拟合的 ARIMA 预测模型和优化的 DBN

预测模型然后获得两个子模型的权重𝜇1和𝜇2。 步骤 4 权重拟合预测：对于子模型权重𝜇1 和𝜇2 再作为时间序列数据进行
ARIMA 拟合，并得到相应的 ARIMA(p,d,q)模型，并预测将来的值，在测试数据

集上试验。

步骤 5 混合模型构造：设置 ARIMA 模型参数后，得到其预测结果𝑥1𝑖 (𝑖 = 1,2,3, … ,120)。以相关影响指标数据作为的输入结果优化 DBN 得到预测结果

𝑥2𝑖 (𝑖 = 1,2,3, … ,120)。最后，通过𝑅𝑖 = 𝜇1𝑖 × 𝑥1𝑖 + 𝜇2𝑖 × 𝑥2𝑖 计算的混合模型的预测结 果𝑅𝑖(𝑖 = 1,2,3 … 120)。

11ii

 y1i +2i

+ 2i =1



y2i

=

yˆ i

  

(4-1)

30

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

( ) RMSE = 1 n yˆi − yi 2 n i=1

(4-2)

见公式(4-1)，𝜇1𝑖 为第一个子模型的系数，𝑦1′𝑖为第一个子模型的预测值，本论文 𝜇1𝑖 为𝐴𝑅𝐼𝑀𝐴模型在混合预测模型的占比系数； 𝜇2𝑖 为第二个子模型的系数，本论文 𝜇2𝑖 为 DBN 模型在混合预测模型的占比系数， 𝑦2′𝑖为第二个子模型预测值； 𝑦̂𝑖为混 合模型预测值。其中依据 RMSE 来判定混合模型的收敛误差。

并依据 Sigmoid-OAPSO 在训练数据集上寻找最优𝜇1𝑖 、𝜇2𝑖 其中𝑖 = 1,2,3, … ,120，

当 RMSE 最小时则判定找到了混合模型最优的系数序列。并进行 ARIMA 拟合预

测，得到混合模型系数 ARIMA(p,d,q)预测模型，最终得到混合模型 ARIMA-

SOAPSO-DBN。

4.2 构造 ARIMA 时间序列预测模型

本节介绍 ARIMA 预测模型拟合实验过程。

4.2.1 方案设计和建模步骤
通过实验得到的铁路集装箱运量（某区域铁路集装箱运量）预测 ARIMA 模型， 首先根据单位根检验计算分析原始时间序列的平稳程度，若不平稳，则取对数法进 行平稳化处理，然后进行数据集分解，将时间序列数据中的年周期、季节周期等趋 势和剩下的数据残差分解出来，最后再对残差进行分析。对非平稳序列做差分处理 将数据平稳，做的差分次数即为𝐴𝑅𝐼𝑀𝐴(𝑝, 𝑑, 𝑞)模型中的 d 的值。再通过自相关和 偏相关函数图的截尾或者拖尾阶数来确定 p，q 的值，再通过 AIC 信息准则选取最 优模型，最后检验模型的拟合效果，既检验参数估计是否具有显著性，同时通过 Q 值来检验残差序列的随机性，最后 ARIMA 模型的方程。

图 4-2 ARIMA 模型建模流程图 Figure 4-2 ARIMA model modeling step flow chart
31

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

因常见的时间序列模型都是非平稳的，所以需要用差分或者其他方法将不平 稳时间序列平稳化。对差分平稳序列可以用 ARIMA(p,d,q)模型来拟合，其中参数
p 为自回归项阶数，参数 q 为移动平均项阶数，参数 d 为差分平稳的次数。图 4-2
是 ARIMA 模型建模步骤： （1）首先对集装箱运量时间序列数据集进行预处理包括缺失值，异常值检查；
然后对该数据集进行平稳性检验，判定该数据集是否是一个平稳数据； （2）如果数据不平稳，则需用差分法或取对数法平稳化处理； （3）若时间数据平稳，然后观测数据序列的 ACF 图与 PACF 图，根据 ACF
图以及 PACF 图的性质来确定𝑝参数值和𝑞参数值； （4）充分考虑各种可能性，可以建立多个拟合模型，从所有通过检验的拟合
模型中再通过使用 AIC 方法从中选择最优的模型。如果创造的模型没有通过检验， 可以继续选择 ARMA 适当阶数来构造模型来拟合。若模型有效，则对模型进行优 化；
（5）计算参数估计，确定模型中未知的回归项系数值并得到方程，检验模型 的有效性；
（6）对残差进行正态性和白噪声检验，检验模型是否充分提取了数据里的线 性成分；
（7）利用最优模型来实验时间序列的测试集，进行效果检验。
4.2.2 基于 ARIMA 某区域集装箱运量预测研究
本研究为某区域铁路集装箱月度运量的 ARIMA 预测模型。 实验的数据集是从原始数据集装箱运货情况历史数据表提炼出来，具体为七 个区域如东北区域、华东区域、华北区域、华中区域、华南区域、西南区域、西 北区域的发送车站的发送集装箱 TEU 为统计。本训练 ARIMA 模型实验以某区域 集装箱运量为例，时间粒度为月度。训练数据为 2007 年 1 月至 2016 年 12 月，共 10 年 120 个月；测试数据为 2017 年 1 月至 2018 年 3 月，共 15 个月。 （1）数据预处理 接下来进行平稳性检测，采用单位根检验法检测，就是通过 Dickey-Fuller Test 进行判断，在一定置信水平下，对于时序数据假设为真则非稳定。这是一种常用 的单位根检验方法，它的原假设为序列具有单位根非平稳，对于一个平稳的时序 数据，就需要在给定的置信水平上显著，拒绝原假设，既数据平稳。本实验以某 区域为例做铁路集装箱运量预测研究。图 4-3 展示某区域集装箱运量时序数据的 移动平均值上下浮动，定性分析本某区域集装箱运量数据集是不稳定的。
32

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

图 4-3 某区域集装箱运量数据移动平均值/标准差实验效果图 Figure 4-3 Moving mean/standard deviation of container volume data in north China

表 4-1 某区域集装箱运量数据 Dickey-Fuller Test 定量检验结果

Table 4-1 Dickey-fuller Test results of container volume data in north China

指标

结果

Dickey-Fuller Test Statistic

-2.076658

P-value

0.254003

#Lags Used

2.000000

Number of Observations Used Critical Value （1%）

132.000000 -3.480888

Critical Value （5%）

-2.883697

Critical Value （10%）

-2.578586

表 4-1 显示此时 p 值为 0.254003，说明并不能拒绝原假设。通过上表 DickeyFuller Test 的数据可以明确的看出，在 0.254003 置信度下，数据定是不稳定的。
数据不稳定的原因主要有以下两点：数据随着时间的变化而显著上升或者下 降。数据在特定的时间段内呈周期性变动。比如说节假日，季节或者活动导致数 据的呈一定规律的周期性变动。而对数变换法目的为了按比缩小数据值从而减少 振动幅度，使其线性规律更加明显，且保留本质规律。所以用对数变换法对该数 据序列进行平稳化处理，图 4-4 为某区域集装箱运量数据集取对数的结果图，显 示数据值域范围明显缩小为 11.5 以下。指数平稳法是对周期内的数据进行了加权， 能在一定程度上减小年周期因素。
（2）数据集分解 分解就是将时序数据分离成不同的成分。常用的分解成分有长期趋势、季节 周期和随机残差成分。下图为某区域铁路集装箱运量数据分解结果图。通过图 45 直观展示，显然某区域集装箱运量具有明显的年周期与周期波动上升趋势成分。

33

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

图 4-4 某区域集装箱运量数据集指数平均法平稳化的结果图 Figure 4-4 Results of exponential average method stabilization of container volume data set in
north China region
重点对时序数据残差进行分析：

图 4-5 某区域铁路集装箱运量数据集分解图 Figure 4-5 Breakdown of data set of container volume of railway in north China
由图 4-6 直观显示数据较稳定，表 4-2 Dickey-Fuller Test 的定量结果显示，显 然 Dickey-Fuller Test Statistic 值-5.015172 远小于 Critical valu（e 1%）的值-3.487517， 所以在 99%的置信度下，判断数据是稳定的。
34

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

图 4-6 某区域铁路集装箱运量数据数据分解残差分析 Figure 4-6 Residual analysis of railway container volume data in north China

表 4-2 时序数据残差 Dickey-Fuller Test 定量检验结果

Table 4-2 Data residuals dickey-fuller Test quantitative Test results

指标

结果

Dickey-Fuller Test Statistic P-value
#Lags Used Number of Observations Used
Critical Value （1%） Critical Value （5%） Critical Value （10%）

-5.015172 0.000021 5.000000 117.000000 -3.487517
-2.886578
-2.580124

（3）计算参数值 首先进行差分，差分法就是对原始时间序列，这里为集装箱运量取对数后 的时间序列数据做一阶差分，对差分后的序列在 Dickey-Fuller Test 定量检测，直 至达到数据平稳标准。但是做的差分次数越少越好，既做 1 阶差分就平稳了就不 做 2 阶，避免过差分现象导致预测模型不可靠。对数据集做 1 阶差分，表 4-3 为 1 阶差分后的 Dickey-Fuller Test 定量检测结果，显然 P 值为 0.050422 大于 0.05，不 能拒绝原假设，此时数据为不平稳，那就继续做第二阶差分。 表 4-4 显示，P 值为 0.000097 远远小于 0.05 显著性水平，此时 2 阶差分后的 时间序列通过平稳检测，图 4-7 展示直观上看此时数据在 0 上下 0.08 幅度波动， 较为平稳。则 ARIMA(p,d,q)中的参数 d 为 2。 （4）模型参数选择与优化 𝑝的值就是 ACF 图中纵轴值第一次穿过置信区间时的横轴值。𝑞值就是 PACF

35

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

图中纵轴值第一次穿过上置信区间的横轴值。

表 4-3 1 阶差分后的 Dickey-Fuller Test 定量检测结果

Table 4-3 Quantitative Test results of dickey-fuller Test after the first difference

指标

结果

Dickey-Fuller Test Statistic P-value

-3.050711 0.050422

#Lags Used Number of Observations Used
Critical Value （1%） Critical Value （5%） Critical Value （10%）

13.000000 110.000000 -3.491245
-2.888195 -2.580988

表 4-4 2 阶差分 Dickey-Fuller Test 定量检测结果

Table 4-4 Quantitative Test results of 2 differential dickey-fuller Test

指标

结果

Dickey-Fuller Test Statistic

-4.667289

P-value

0.000097

#Lags Used

13.000000

Number of Observations Used Critical Value （1%）

109.000000 -3.491818

Critical Value （5%）

-2.888444

Critical Value （10%）

-2.581120

图 4-7 2 阶差分后的时序图 Figure 4-7 Sequence diagram after the difference of order 2
由差分后的时间序列数据的自相关图和偏相关图分析出𝑝 = 1, 𝑞 = 1，但是对 于同一个时间序列数据，拟合的模型有很多，这就需要挑一个相对最合适的模型， 既选取最合适的𝑝和𝑞的值。模型在选取最优解一般依据最小信息量准则和贝叶斯 信息准则。
36

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

最小信息量准则就是通过所选估计模型的复杂度与这个模型拟合数据时的精 确度来权衡的模型的优良性，是一个从多角度测评最优配置的准则。最小信息量准 则是一种加权函数，具体计算函数为： 𝐴𝐼𝐶 = −2 ln(𝐿) + 2𝑘；其中𝐿为极大似然函 数值，k 为参数个数；该公式值越小，模型最好。 但是也有不足，当样本量越大， 自变量越多时该准则所选最优模型有偏差。贝叶斯信息准则的定义公式为：𝐵𝐼𝐶 = −2 ln(𝐿) + 𝑘𝑙𝑛(𝑛)其中，𝑘为模型参数个数，𝑛为样本数，𝐿为似然函数，𝑘𝑙𝑛(𝑛)为 惩罚项，该惩罚项在维数过大时样本数据相对少时避免出现维数灾难。

(a) 自相关图

(b) 偏相关图 图 4-8 自相关图和偏相关图 Figure 4-8 Autocorrelation diagram and partial correlation diagram

由差分后的时间序列数据的自相关图 4-8(a)和偏相关图 4-8(b)分析出𝑝 = 1, 𝑞 = 1，此研究中样本量不是大样本，所以采用最小信息量准则进行定阶。由表 4-5 显然当𝑝 = 1, 𝑞 = 1最小信息量准则为-548.3440 是最小的，由表 4-6𝑅2决定系数 值为 0.7675 说明与实际数据误差是最小的预测是最准确的，所以本实验得出 ARIMA(1,2,1)模型为某区域集装箱运量预测的模型。

阶数
AR0 AR1 AR2 AR3

表 4-5 最小信息量准则矩阵
Table 4-5 AIC matrix MA0
-432.9224 -498.4531 -523.3839 -525.5637

MA1
-540.8726 -548.3440 -546.4381 -544.9573

37

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

表 4-6 模型预测准确度𝑅2决定系数

Table 4-6 Accuracy of model prediction 𝑅2 scores

阶数

MA0

AR0

-0.3792

AR1

0.3267

AR2

0.4763

AR3

0.5219

MA1
0.5050 0.7675 0.6697 0.6795

图 4-9 某区域集装箱运量𝐴𝑅𝐼𝑀𝐴(1,2,1)模型拟合效果图 Figure 4-9 A certain area 𝐴𝑅𝐼𝑀𝐴(1,2,1)Model fitting effect drawing

还要针对𝐴𝑅𝐼𝑀𝐴(1,2,1)模型预测的残差进行正态性检验和自相关性检验。残

差满足正态性，主要是为了残差集中于某一个数值，如果该值与 0 很接近，则它 实际服从均值为 0 的正态分布，即它是一个白噪声。显著有效的模型的残差为白 噪声序列。

图 4-10 中，红色的线为450参考线，蓝色点为标准正态分布的分位数为横坐 标，残差值为纵坐标的散点，由图 4-10 残差的 QQ 图得出残差服从正态分布且平 均值为 0 且方差为常数。且 D-W 检验值为 1.9212256533485312，当 D-W 检验值 越接近于 2 时，不存在自相关性，说明模型较好。
接下来对某区域铁路集装箱运量预测模型进行参数估计，通过模型最大似然

参数估计的参数估计得到模型参数，得到 ARIMA 模型的方程见公式(4-3)：

xt = 0.5236 − 0.3177xt−1 − 0.7742xt−2 − 0.2767xt−3 +t + 0.8327t−1 +t−2

(4-3)

38

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

图 4-10 模型预测值残差的 QQ 图 Figure 4-10 Model predicts value residuals of QQ graph
4.2.3 基于 ARIMA 的全国集装箱运量预测研究
（1）数据预处理
图 4-11 铁路集装箱运量时间序列图 Figure 4-11 Railway container volume time series diagram
图 4-11 为铁路集装箱 2007 年 1 月到 2018 年 3 月的月度运量的时间序列折线 图。进行宏观分析得出，在 16 年 3 月之前 400000TEU 上下波动，16 年 3 月之后 呈显著上升趋势，截止数据集最近记录 18 年 3 月的集装箱运量已超出 1000000TEU， 直观上看并未明显的季节性周期表现。
图 4-12 显示集装箱运量时序数据的移动平均值/标准差有越来越大的趋势，所 以定性分析本集装箱运量数据集是不稳定的。
39

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

图 4-12 集装箱运量数据移动平均值/标准差实验效果图 Figure 4-12 Experimental results of moving mean/standard deviation of national container traffic

Dickey-Fuller Test 定量检验结果见表 4-7：

表 4-7 集装箱运量数据 Dickey-Fuller Test 定量检验结果

Table 4-7 Dickey-Fuller Test quantitative Test results of national container volume data

指标

结果

Dickey-Fuller Test Statistic P-value
#Lags Used Number of Observations Used
Critical Value （1%） Critical Value （5%） Critical Value （10%）

1.328530 0.996764 13.000000 121.000000 -3.485585
-2.885739
-2.579676

此时𝑝值为 0.996764，则说明并不能拒绝原假设。通过表 4-7 Dickey-Fuller Test 数据监测结果可以明确的看出，在 0.996764 置信度下，数据序列定是不稳定的。
对数变换法目的为了按比缩小数据值从而减少振动幅度，使其线性规律更加 明显，且保留本质规律。图 4-13 为集装箱运量数据集取对数的结果图，可以看出 数据值域范围明显缩小。
指数平均法是对周期内的数据进行了加权，能在一定程度上减小年周期因素， 但并不能完全剔除，如要完全剔除可以进一步进行差分操作。图 4-14 为集装箱运 量数据集取对数的结果再进行指数平均处理结果。
（2）数据集分解 图 4-15 为铁路集装箱运量数据分解结果图，显而易见分解出来的成分有长期 趋势、季节周期和随机残差成分。 通过图 4-15 直观展示，显然该时间序列具有明显的年周期与长期上升趋势成

40

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

分。接下来重点对时序数据残差进行分析。

图 4-13 集装箱运量数据集取对数的结果图 Figure 4-13 A logarithmic result of the national container volume data

图 4-14 集装箱运量数据集指数平均法平稳化的结果图 Figure 4-14 The result chart of the index average method for the national container volume data set
由图 4-16 显示时序数据残差的均值和方差值域在[−0.05, +0.05]之间上下波 动，值域已经非常小了，趋于常数，几乎无波动，所以直观上可以认为是稳定的 数据。
由表 4-8 Dickey-Fuller Test 的定量结果显示，显然 Dickey-Fuller Test Statistic 值原小于 Critical value（1%）的值，既 −8.299186e + 00 −3.485122e + 00 ，所以在 99%的置信度下，判断数据是稳定的。
（3）计算参数值 接下来对数据集做 1 阶差分，表 4-9 为 1 阶差分后的 Dickey-Fuller Test 定量 检测结果，显然 P 值为 0.46 远远大于 0.05，不能拒绝原假设，此时数据为不平稳。
41

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

图 4-15 铁路集装箱运量数据集分解图 Figure 4-15 A breakdown of the national railway container of china traffic data set

图 4-16 数据残差分析图 Figure 4-16 Data residuals analysis chart

表 4-8 时序数据残差 Dickey-Fuller Test 定量检验结果

Table 4-8 Data residuals dickey-fuller Test quantitative Test results

指标

结果

Dickey-Fuller Test Statistic

-8.299186e+00

P-value

4.061823e-13

#Lags Used

0.000000e+00

Number of Observations Used Critical Value （1%）

1.220000e+02 -3.485122e+00

Critical Value （5%）

-2.885538e+00

Critical Value （10%）

-2.579569e+00

以此类推，经过时间序列数据差分实验得出结论，做了 1 阶差分，再做 1 阶差 分后此时数据序列达到平稳。此时 Dickey-Fuller Test 定量检测结果为表 4-10。

42

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

表 4-9 1 阶差分后的 Dickey-Fuller Test 定量检测结果

Table 4-9 Quantitative Test results of dickey-fuller Test after the first difference

指标

结果

Dickey-Fuller Test Statistic P-value
#Lags Used Number of Observations Used
Critical Value （1%） Critical Value （5%） Critical Value （10%）

-1.635279 0.464729 12.000000 110.000000 -3.491245
-2.888195
-2.580988

表 4-10 2 阶差分 Dickey-Fuller Test 定量检测结果

Table 4-10 Quantitative Test results of 2 differential dickey-fuller Test

指标

结果

Dickey-Fuller Test Statistic P-value
#Lags Used Number of Observations Used
Critical Value （1%） Critical Value （5%） Critical Value （10%）

-5.044979 0.000018 12.000000 109.000000 -3.491818
-2.888444
-2.581120

表 4-10 显示，P 值为 0.000018 远远小于 0.05 显著性水平，此时 2 阶差分后的 时间序列通过平稳检测。
由图 4-17 为数据残差 2 阶差分后的时序图，显而易见范围为以 0 为中心，震 动幅度 0.03 上下波动，且范围在[-0.03,+0.03]之间，所以判定此时该数据残差序列 已经稳定。
（4）模型参数选择与优化 经过一次差分再一次差分后此时时间序列已经平稳所以 d = 2 ，但是构造合适 的 ARIMA(p,d,q)模型关键是参数𝑝自回归项阶数和参数𝑞移动平均项阶数的取值。 而𝑝和𝑞的取值可以通过观察时间序列的自相关系数（ACF）和偏相关系数（PACF） 值得到。图 4-18 为 2 阶差分后的集装箱运量平稳的时间序列的自相关图和偏自相 关图。
由差分后的时间序列数据的自相关图和偏相关图分析出 p = 1, q = 1 。由表 4-11 得出显然当 p = 1, q = 1 最小信息量准则为-656.2309 不是最小的，但是与最小的所差 无几，但是由表 4-12 所示𝑅2决定系数当 p = 1, q = 1 时最大为 0.7899 则说明此时与
实际数据误差是最小的所以预测是准确度较高的，所以本实验得出 ARIMA(1, 2,1)
模型为集装箱运量预测的模型。

43

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

图 4-17 2 阶差分后的时序图 Figure 4-17 Sequence diagram after the difference of order 2

(a) 自相关图

(b) 偏相关图 图 4-18 自相关图和偏相关图 Figure 4-18 Autocorrelation diagram a) and partial correlation diagram b)

阶数
AR0 AR1 AR2 AR3

表 4-11 最小信息量准则矩阵
Table 4-11 AIC matrix
MA0 -493.7602 -554.4146 -591.2989 -613.9865

MA1
-616.3307 -656.2309 -655.4216 -657.4115

44

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

阶数
AR0 AR1 AR2 AR3

表 4-12 模型预测准确度𝑅2决定系数
Table 4-12 𝑅2 scores
MA0 0.3699 0.6011 0.7205 0.7329

MA1
0.7502 0.7899 0.7424 0.7417

图 4-19 𝐴𝑅𝐼𝑀𝐴(1,2,1)模型拟合效果图 Figure 4-19 𝐴𝑅𝐼𝑀𝐴(1,2,1)Model fitting effect drawing
图 4-20 模型预测值残差的 QQ 图 Figure 4-20 Model predicts value residuals of QQ graph
ARIMA(1,2,1)模型预测的残差进行正态性检验和自相关性检验。残差满足正 态性，主要是为了残差集中于某一个数值，如果该值与 0 很接近，则它实际服从 均值为 0 的正态分布，即它是一个白噪声，显著有效的模型的残差为白噪声序列。
45

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

由残差的 QQ 图 4-20 得出残差服从正态分布且平均值为 0 且方差为常数。且 D-W 检验值为 2.1366309741590213，由于当 D-W 检验值越接近于 2 时，不存在自相关

性，则说明该预测模型效果较好。

接下来对模型进行参数估计，通过模型最大似然参数估计的参数估计得到模

型参数，得到 ARIMA 模型的方程见公式(4-4)：

xt = 0.2136 − 0.1157xt−1 − 0.6787xt−2 − 0.1122xt−3 +t + 0.4171t−1 +t−2

(4-4)

4.3 基于改进的混合模型某区域铁路集装箱运量预测算法研究
该节介绍改进的混合模型在某区域铁路集装箱运量预测的算法设计过程。
4.3.1 子模型权重系数计算
ARIMA 和优化的 DBN 两个子模型的权重为 u1 和 u2 ，所以对测试数据集时
间跨度为 2007 年 1 月至 2016 年 12 月，共 120 个月进行分析计算。图 4-21 为 SOAPSO-DBN 与 ARIMA(1,2,1)某区域集装箱运量预测模型预测结果。
𝐴𝑅𝐼𝑀𝐴(1,2,1)模型与 DBN 模型的在混合模型中所占比例𝜇1和𝜇2值为如图 422 展示，此时混合预测模型𝑅𝑖 = 𝜇1𝑖 𝑥1𝑖 + 𝜇2𝑖 𝑥2𝑖 的在训练数据集上收敛误差 RMSE 最 低为 8260.456TEU。
图 4-22 为在某区域铁路集装箱运量数据测试集上的计算出混合模型的子模型 系数𝜇1和𝜇2的值。

图 4-21 ARIMA 和 DBN 模型预测某区域集装箱运量结果 Figure 4-21 The ARIMA and DBN models forecast the container volume results
46

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

图 4-22 某区域训练集集装箱运量子模型𝜇1和𝜇2的值 Figure 4-22 A regional training set container transport quantum model values of 𝜇1and 𝜇2

4.3.2 子模型权重系数 ARIMA 拟合

接下来对𝜇1𝑖 ，𝜇2𝑖 (𝑖 = 1,2, … 120)进行时间序列分析，因为显然该数据序列数据 值范围小且较平稳所以用𝐴𝑅𝐼𝑀𝐴模型进行拟合。首先进行 Dickey-Fuller Test 定量 检测，检测𝜇1和𝜇2数据序列的平稳程度。

表 4-13 𝜇1𝑖 系数值 Dickey-Fuller Test 定量检验结果

Table 4-13 Dickey-fuller Test quantitative Test results of 𝜇1𝑖

指标

结果

Dickey-Fuller Test Statistic P-value
#Lags Used Number of Observations Used
Critical Value （1%） Critical Value （5%） Critical Value （10%）

-9.653256e+00 1.416136e-16 0.000000e+00 1.190000e+02 -3.486535e+00 -2.886151e+00 -2.579896e+00

表 4-14 𝜇2𝑖 系数值 Dickey-Fuller Test 定量检验结果

Table 4-14 Dickey-fuller Test quantitative Test results of 𝜇2𝑖

指标

结果

Dickey-Fuller Test Statistic P-value
#Lags Used Number of Observations Used
Critical Value （1%） Critical Value （5%） Critical Value （10%）

-1.059375e+01 6.428296e-19 0.000000e+00 1.190000e+02 -3.486535e+00
-2.886151e+00
-2.579896e+00

47

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

由表 4-13，表 4-14 的 P 值显示都为很接近 0 的数，则表明某区域集装箱运量 混合预测模型占比系数𝜇1和𝜇2数据序列都为平稳序列说明该数据序列无需做差分， 则𝜇1和𝜇2对应的 ARIMA(p,d,q)模型系数中的 d 值都为 0。
通过观察数据序列的自相关系数(ACF)与偏自相关系数(PACF)确定 ARIMA 模 型的 p 值与 q 值，如图 4-23 展示，𝜇1的 ACF 图与 PACF 图都为 2 阶拖尾。

(a) 自相关图

Figuer 4-23

(b) 偏相关图
图 4-23 𝜇1的 ACF 图与 PACF 图
Autocorrelation coefficient and Partial autocorrelation coefficient

因为只有 120 个数据所以通过 AIC 准侧来定量分析对 p，q 值确定。

阶数
AR0 AR1 AR2

表 4-15 𝜇1序列的最小信息量准则矩阵

Table 4-15 AIC matrix of 𝜇1

MA0

MA1

109.1990 73.8040 62.0918

51.2208 47.5095 60.3981

MA2
59.8734 51.9370 49.8085

由表 4-15 展示，当𝑝 = 1, 𝑞 = 1时 AIC 值为 47.5095 为最小，所以𝜇1时间序列 数据的 ARIMA 预测模型为 ARIMA(1,0,1)。
通过对模型进行最大似然估计的参数估计从而算的模型的参数，得到 1i 系 数值 ARIMA 模型的方程：

48

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

xt = 0.34523 − 0.30981xt−1 − 0.8730xt−2 − 0.19384xt−3
(4-5)
+0.2843t + 0.94753t−1 + t−2
同理对𝜇2数据序列进行分析，如图 4-24 所示，𝜇2的自相关系数图为 2 阶拖尾， PACF 图都为 3 阶拖尾。

(a) 自相关图

Figure 4-24

(b) 偏自相关系数 图 4-24 𝜇2的 ACF 图与 PACF 图 Autocorrelation coefficient and partial autocorrelation coefficient of 𝜇2

阶数
AR0 AR1 AR2

表 4-16 𝜇2序列的最小信息量准则矩阵

Table 4-16 AIC matrix of 𝜇2

MA0

MA1

123.0853 70.8327 90.2812

60.4595 85.3211 95.3214

MA2
90.4513 92.4231 56.2141

由表 4-16 所示，AIC 值最小为 56.2141，此时𝜇2的预测模型结构𝐴𝑅𝐼𝑀𝐴(2,0,2)。

得到𝜇2𝑖 系数值 ARIMA 模型的方程：

xt = 0.20495 − 0.9273xt−1 − 0.8331xt−2 − 0.3513xt−3

+t + 0.7344t−1 + t−2

(4-6)

得到混合模型系数 ARIMA 预测模型，并通过其预测接下来 15 个值，得到𝜇1， 𝜇2在测试数据时间跨度上的值，并根据混合预测模型𝑅𝑖 = 𝜇1𝑖 𝑥1𝑖 + 𝜇2𝑖 𝑥2𝑖 得出混合模 型在测试数据集上的时间跨度 2017 年 1 月到 2018 年 3 月共 15 个月的预测值，并

计算出𝑅2决定系数值。

49

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

表 4-17 某区域的子模型系数测试集时间跨度上的预测值

Table 4-17

The predicted values over the time span of a submodel coefficient test set for an area

编号

𝜇1

𝜇2

0

0.83

0.17

1

0.52

0.48

2

0.30

0.70

3

0.45

0.55

4

0.18

0.82

5

0.03

0.97

6

0.28

0.72

7

0.78

0.22

8

0.51

0.49

9

0.38

0.62

10

0.86

0.14

11

0.37

0.63

12

0.09

0.91

13

0.62

0.38

14

0.4

0.6

4.3.3 实验结果及对比分析
本对比实验硬件环境与软件环境与 3.1.1 相同，不再赘述。为了展示所提出模 型的预测精度，本文设计了单隐层 BPNN，单隐层 Elman 神经网络(ENN)，径向 基函数神经网络(RBF-NN)，同时为了验证本文提出的 SOAPSO 较优所以设计了 GPSO-DBN 算法与 SOAPSO-DBN 算法进行了比较，验证 SOAPSO 算法的优越性。 收敛误差，最大个数迭代，BPNN3 的学习率，RBF-NN 的扩展值分别为 0.0001、 1000 和 0.01，0.8。

表 4-18 在测试集上 6 个模型对比预测准确度

Table 4-18 Six models were compared on the test set to predict accuracy

模型名称

模型结构

精确度 𝑅2决定系数

运算时间(s)

ARIMA(p,d,q)

(1,2,1)

0.6592

—

SOAPSO-DBN

34-15-23-17-1

0.7165

1.0

GPSO-DBN

34-18-11-21-1

0.6240

2.0

SOAPSO-BPNN3

34-15-1

0.4740

2.0

SOAPSO-ENN3

34-13-1

0.5101

3.0

SOAPSO-RBF-NN

34-21-1

0.2377

3.0

ARIMA-SOAPSO-DBN

—

0.8423

—

BPNN3 中所有的激活函数都是 log-sigmoid 函数。ENN3 中的所有激活函数都
50

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

是 tan-sigmoid 函数。由于测试数据集时间跨度小，试验数据量小，所以使用的是 批量数据、梯度下降算法训练 DBN、BPNN3、ENN3。在本文中，算法预测准确 度用𝑅2决定系数表示，效率用算法运算时间表示。
对比实验结果展示如表 4-18 所示。SOAPSO-BPNN3 意味着 BPNN 有一个隐 藏层所以和输入层、输出层共同构成 3 层神经网络，并通过 SOAPSO 进行优化找 到最优的神经网络结构。同样的，SOAPSO-ENN 意味着 ENN3 有一个隐藏层由 SOAPSO 优化。结构如表 4-18 所示，当获得最优结果时建立模型的结构参数。 𝑝，𝑑，𝑞 中 ARIMA 分别是 1,2,1。某区域集装箱运量 DBN 预测模型的结构是 3415-23-17-1，其中值的数目表示网络层的数量和值表示网络层的数量每一层的神 经元。换句话说，输入层为 34 个神经元，第一个隐层有 15 个神经元，第二隐层 有 23 个神经元，第二隐层 17 个神经元。其他模型的结构解释同上。7 个模型的 预测精确度如表 4-18 所示。依据 GPSO-DBN 算法与 SOAPSO-DBN 算法对比实验 结果的运算时间，SOAPSO-DBN 为 1 秒，GPSO-DBN 算法为 2 秒显然 SOAPSO 更优，况且根据𝑅2决定系数 GPSO 陷在了局部最优解没有找到全局最优解。

图 4-25 ARIMA-SOAPSO-DBN 混合模型及对比模型在测试集上预测效果 Figure 4-25 The hybrid model and others predicts the effect on the test set
本研究提出的混合模型 ARIMA-SOAPSO-DBN 预测精度最佳，其 R2 决定系
数为 0.8766，图 4-25 为某区域混合模型预测效果图及对比实验结果图。结果表明， 该混合模型具有较好的性能泛化能力和更高的预测精度。因此，它是适用于铁路 集装箱运量预测。这表明，一方面，某区域铁路集装箱运量确实为周期性时间序 列所以 ARIMA 适合预测铁路货运量，另一方面，某区域铁路集装箱运量受多个 影响因素影响从而合理地使用这些数据用于某区域铁路集装箱运量预测而 DBN 适 用于挖掘相关因素指标与某区域铁路集装箱运量的定量关系。
51

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

4.4 基于改进的混合模型全国铁路集装箱运量预测算法研究

4.4.1 子模型权重系数计算
ARIMA 和优化的 DBN 两个子模型的权重为𝜇1和𝜇2，所以对训练数据 2007 年 1 月至 2016 年 12 月，共 120 个月进行分析计算。

图 4-26 ARIMA 和 DBN 模型预测集装箱运量结果 Figure 4-26 The ARIMA and DBN models forecast the national container volume results
如图 4-26 为子模型 SOAPSO-DBN 与子模型 ARIMA(1,2,1)集装箱运量预测模 型预测结果。如图 4-27 为在铁路集装箱运量数据测试集上的计算出混合模型的子 模型系数𝜇1和𝜇2的值。

图 4-27 训练集集装箱运量子模型𝜇1和𝜇2的值 Figure 4-27 Training quantum model of container transport values of 𝜇1and 𝜇2
52

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

4.4.2 子模型权重系数 ARIMA 拟合

由表 4-19，表 4-20 所示𝜇1和𝜇2的 Dickey-Fuller Test 定量检验结果表的 P-value 也显示都为很接近 0 的数。

表 4-19 𝜇1𝑖 系数值 Dickey-Fuller Test 定量检验结果

Table 4-19 Dickey-fuller Test quantitative Test results of 𝜇1𝑖

指标

结果

Dickey-Fuller Test Statistic P-value
#Lags Used Number of Observations Used
Critical Value （1%） Critical Value （5%） Critical Value （10%）

-9.653256e+00 1.416136e-16 0.000000e+00 1.190000e+02 -3.486535e+00
-2.886151e+00
-2.579896e+00

表 4-20 𝜇2𝑖 系数值 Dickey-Fuller Test 定量检验结果

Table 4-20 Dickey-fuller Test quantitative Test results of 𝜇2𝑖

指标

结果

Dickey-Fuller Test Statistic P-value
#Lags Used Number of Observations Used
Critical Value （1%） Critical Value （5%） Critical Value （10%）

-1.059375e+01 6.428296e-19 0.000000e+00 1.190000e+02 -3.486535e+00
-2.886151e+00
-2.579896e+00

𝜇1和𝜇2数据序列都为平稳序列说明该数据序列无需做差分，则𝜇1和𝜇2对应的 ARIMA(p,d,q)模型系数中的 d 值都为 0。
如图 4-28 展示，通过观察数据序列的自相关系数(ACF)与偏自相关系数 (PACF)图𝜇1系数数据序列的 ACF 图与 PACF 图都为 2 阶拖尾。

(a) 自相关图
53

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

Figuer 4-28

(b) 偏自相关图 图 4-28 𝜇1自相关图与偏自相关图 Autocorrelation coefficient and Partial autocorrelation coefficient of 𝜇1

AIC 准侧来定量分析确定 p，q 值，依据表 4-21 当𝑝为 2，𝑞为 2 时 AIC 值为 41.5650 为最小，所以𝜇1系数数据拟合的 ARIMA 预测模型为𝐴𝑅𝐼𝑀𝐴(2,0,2)。

阶数
AR0 AR1 AR2

表 4-21 𝜇1序列的最小信息量准则矩阵

Table 4-21 AIC matrix of 𝜇1

MA0

MA1

121.7573 104.6392 83.4421

46.8058 48.7847 44.8808

MA2
48.7683 47.6973 41.5650

通过对 ARIMA 模型进行最大似然估计的参数估计从而算的模型的参数，得 到 1i 系数值 ARIMA 模型的方程：
xt = 0.23411− 0.52131xt−1 − 0.8953xt−2 − 0.12419xt−3
(4-7)
+0.3412t + 0.7612t−1 + t−2

(a) 自相关图

Figuer 4-29

(b) 偏自相关图
图 4-29 𝜇2的 ACF 图与 PACF 图
Autocorrelation coefficient and Partial autocorrelation coefficient of 𝜇2

54

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

通过观察图 4-29𝜇2数据序列的自相关系数(ACF)与偏自相关系数(PACF)图𝜇2 系数数据序列的 ACF 图与 PACF 图也都为 2 阶拖尾。
依据表 4-22 当𝑝为 2，𝑞为 2 时 AIC 值为 19.2837 为最小，所以𝜇2系数数据拟 合的 ARIMA 预测模型为𝐴𝑅𝐼𝑀𝐴(2,0,2)。

阶数
AR0 AR1 AR2

表 4-22 𝜇2序列的 AIC 矩阵

Table 4-22 AIC matrix of 𝜇2

MA0

MA1

100.9269 86.1294 62.1254

26.6144 28.6126 23.0665

MA2
28.6109 28.6557 19.2837

通过对 ARIMA 模型进行最大似然估计的参数估计从而算的模型的参数，得 到 1i 系数值 ARIMA 模型的方程：
xt = 0.323223 − 0.28173xt−1 − 0.28471xt−2 − 0.51356xt−3
(4-8)
+t + 0.7612t−1 + 0.2312t−2
如表 4-23 所示通过𝜇1，𝜇2系数 ARIMA 预测模型预测接下来 15 个值，得到 𝜇1，𝜇2在测试数据时间跨度上的值。

表 4-23 子模型系数测试集时间跨度上的预测值

Table 4-23 编号
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14

The predicted values over the time span of a submodel coefficient test set

𝜇1

𝜇2

0.62

0.38

0.42

0.58

0.68

0.32

0.79

0.21

0.15

0.85

0.8

0.2

0.14

0.86

0.55

0.45

0.63

0.37

0.15

0.85

0.40

0.60

0.64

0.36

0.39

0.61

0.45

0.55

0.68

0.32

55

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

4.4.3 实验结果及对比分析

表 4-24 对比试验结果表

Table 4-24 Table of comparative test results

模型名称

模型结构

精确度 𝑅2决定系数

ARIMA(p,d,q)

(1,2,1)

0.7899

SOAPSO-DBN

35-13-17-22-1

0.6378

GPSO-DBN

35-21-14-17-1

0.5923

SOAPSO-BPNN3

35-25-1

0.5167

SOAPSO-ENN3

35-17-1

0.4217

RBF-NN

35-12-1

0.4992

ARIMA-SOAPSO-DBN

—

0.8749

运算时间(s)
— 1.0 2.0 2.0 3.0 2.0 —

本对比实验硬件环境与软件环境与 3.1.1 相同，不再赘述。为了展示所提出模 型的预测精度，对比模型结构及配置与 4.3.2 相同。集装箱运量 DBN 预测模型的 结构是 35-13-17-22-1，其值的数目表示网络层的数量和值表示网络层的数量每一 层的神经元。换句话说，输入层为 34 个神经元，第一个隐层有 15 个神经元，第 二隐层有 23 个神经元，第二隐层 17 个神经元。其他模型的结构解释同上。

图 4-30 ARIMA-SOAPSO-DBN 混合模型在测试集上预测效果 Figure 4-30 The hybrid model(ARIMA-SOAPSO-DBN) predicts the effect on the test set
7 个模型的预测精确度如表 4-24 所示。本研究提出改进的粒子群优化算法 SOAPSO 与 GPSO 在优化同一模型 DBN 时，找到全局最优解运算时间最少；提 出的模型 ARIMA-SOAPSO-DBN 预测精度最佳其𝑅2决定系数为 0.8749，图 4-30 为该混合模型及其他模型的对比试验预测效果图。结果表明，该混合模型具有较 好的预测精度。因此，它是适用于铁路集装箱运量预测。这表明铁路集装箱运量 也确实为周期性时间序列和 ARIMA 适合于预测铁路货运量，铁路集装箱运量受
56

北京交通大学硕士专业学位论文

基于改进混合模型的集装箱运量预测研究

多个影响因素影响从而合理地使用这些数据用于铁路集装箱运量预测而 DBN 适用 于挖掘相关因素指标与铁路集装箱运量的定量关系，而 ARIMA 模型与 DBN 共同 构成的混合模型中的各自占比系数也是时间序列数据，从而 ARIMA 再次拟合预 测混合模型中的子模型系数，并在测试集上得证 ARIMA-SOAPSO-DBN 模型预测 效果好。
4.5 本章小结
首先本章描述了改进的混合模型构造方法，既首先在训练数据集上实验混合 模型的子模型 ARIMA 和深度置信网络，然后再计算出各自在当混合模型预测精 度为最优时中的占比系数序列，这是占比系数具有时间序列数据特征为时间序列 数据，所以再以 ARIMA 进行拟合，得到未来 15 个月的预测值，并在测试数据集 上实验，结果表明与参与对比的其他 6 个模型对照实验验证出 ARIMA-SAPSODBN 混合模型的预测准确度较高，且寻找最优解次数较小，耗费时间低；通过 SOAPSO-DBN 与 GPSO-DBN 实验结果对比，SOAPSO 在优化深度置信网络时更 优，找到全局最优解运算时间少。

57

北京交通大学硕士专业学位论文

铁路集装箱运量运输需求预测系统设计与实现

5 铁路集装箱运量运输需求预测系统设计与实现
本章主要对铁路集装箱运输需求预测系统进行需求分析及设计开发与实现。

5.1 系统需求分析
介绍开发铁路集装箱运量需求预测系统的需求分析。

5.1.1 功能需求分析
本系统设计的目的是铁路管理部可以通过铁路集装箱运量需求预测，宏观上 及时掌握未来铁路集装箱运输的发展趋势，微观上及时调配集装箱减少集装箱集 结的时间成本。最终，增强中国铁路运输的综合竞争能为，促进全方面多式联运 的发展，从而最大化铁路运输的经济效益。构建多场景铁路集装箱运输需求预测 系统，实现数据采集、数据管理、预测模型管理、可视化等功能。

层面 可视化层
应用层
基础服务层

表 5-1 功能层次说明表
Table 5-1 Functional level description table 功能描述
发挥货运需求预测系统在铁路部门中的基础作用，全面分析利 用“预测层”和“基础层”相关数据，发挥决策支持的“参 谋”作用，促进铁路集装箱运输调度开展。 通过系统对于货运中心、货运通道、货运站点发送量以及接收 量、O/D 货运量等历年数据利用工具进行分析处理，与相应的 算法结合，得到相应的未来某月或者某年的货运需求，相关业 务人员进行数据审核、数据汇总以及数据修订等工作，维护预 测层的结果正确性。
该层是集装箱运量需求预测系统的基础终端、由相应的货运站 点信息、O/D 间货运流量、集装箱运量等基础数据信息组成。 是整个预测系统运行的最基础的保障环节以及数据支撑。

货运需求预测系统分为基础层、预测层、管理决策层三个功能层级。其中基 础层是提供信息和数据的系统最底层，也即预测系统的最基本单元，根据此层提 供的数据来进行支撑预测系统功能的运行。预测层则负责对于历年的数据进行处 理、审核以及汇总等功能，利用相应的算法求的相关的预测量。管理决策层是负 责对系统进行管理、借助系统提供信息进行货运组织等决策，如通过应用层获取 相应的需求预测值，可通过人工交互功能对于预测值进行定量与定性相结合分析、

58

北京交通大学硕士专业学位论文

铁路集装箱运量运输需求预测系统设计与实现

调整。 （1）数据抽取 数据抽取是指从数据源中抽取数据的过程。本论文中数据源较多采用的是
mysql 数据库，其他数据源也有文件形式如 txt 文件、excel 文件、xml 文件等。 （2）应用支撑层 对数据进行了提炼和封装，通过相关的组件以及建立算法模型，旨在通过算
法模型对数据进行深度挖掘和通过工具对数据获取层数据进行多维分析展示和查 询，发现数据中的价值，实现数据分析以及预测。
（3）数据可视化 根据已设计好的系统目标和功能进行平台的构建，将铁路集装箱运输监测的
分析模型和预测模型与 Echarts 可视化模型组件，结合相关技术，在应用层实现可 视化展示。
（4）应用层 应用层是使铁路上集装箱公司管理人员可以通过报表、图表和地图展示等方
式，查看预测结果或者历史数据还有实时监控当日集装箱运量情况。前端展示平 台采应用 B/S 架构，由一整套组件或服务构成，并通过功能强大、基于 Web 的通 信框架相连接，满足应用户不同的应用需求。这些组件既可以独立存在，也可以 相互转化和调应用，并且均可在一个界面里实现。
5.1.2 性能需求分析
系统应能满足以下性能指标：响应时间小于 2 分钟；平均无故障时间不短于 2000 小时。
铁路集装箱运输需求预测系统具备主要性能： （1）安全性高 系统对业务数据采用多种安全保护。系统设置了权限管理功能模块，根据不 同的登录用户名不同权限跳转到不同的操作界面。例如用户分类有集装箱公司领 导权限可以查询预测结果，相关政策文献；基础数据维护人员可以导入，修改相 关基础数据及历史数据；系统管理人员设计领导操作的页面，设计给领导推送的 实时信息，为领导决策提供支持； （2）扩展性强 因为考虑到未来向多式联运发展，注重的就是与其他货运企业，海关，陆路 运输，水路运输等公司机构的信息交流，所以需要系统设计上预留出公路，水路，

59

北京交通大学硕士专业学位论文

铁路集装箱运量运输需求预测系统设计与实现

海关，货运公司等多式联运参与方的数据接口。
5.2 系统功能设计
本节介绍铁路集装箱运量需求预测系统的功能设计。
5.2.1 系统整体设计
铁路集装箱运量需求预测系统功能包括六个部分，分别是数据采集功能、数 据管理功能、需求预测功能、可视化展示功能、用户管理功能模块。
数据采集包括数据录入、数据导入、数据采集等功能； 数据管理包括数据存储、数据汇总、数据预处理等功能； 需求预测包括调用算法针对不同场景下、不同货运种类需求的长期预测和短 期预测等功能；可视化展示包括历史数据展示、预测结果展示等功能。

图 5-1 铁路集装箱运量需求预测系统功能 Figure 5-1 Function of railway container volume demand forecasting system
用户管理模块是为了维护系统的安全，只有经过授权的用户才能进入货运需 求预测系统，进行相应的操作。系统将用户分为三类角色：公司领导：查看全部数 据展示结果；工作人员： 能进行全部业务操作，但不能进行系统管理操作；基层 操作员：具有全部最高权限，可以进行系统全部操作。
5.2.2 数据采集模块
主要从集装箱公司相关数据存储部门或者相关集装箱货运网站、国家政策网
60

北京交通大学硕士专业学位论文

铁路集装箱运量运输需求预测系统设计与实现

站以及国家统计局中采集到相关的数据信息，将数据批量导入系统，根据货运需 求预测，需要采集以下数据：铁路货运站间集装箱以及运输货物品类例如煤炭、 金属矿石等运量 O\D 段，时间跨度为 2007-2018 年以及未来的数据，主要包括每 日铁路货运站间集装箱运量 O\D。主要采集内容如下：
（1）铁路集装箱运量数据：需要搜集全国以及预测目标城市范围内的铁路货 运站 2007 年以来的年度、月度铁路集装箱运输总量以及分货物品类的运量历史数 据，将数据合并到地级市层面，以及站点货运中心层面。
（2）经济数据，全国（某区域）主要工业产品产量和宏观经济数据等。 （3）相关政策，去产能政策、公转铁政策、多式联运政策等，以提纲式页面 文字信息采集。集装箱运量数据，公路集装箱运量、水路集装箱运量；主要港口 的集装箱吞吐量、铁路集装箱 OD 运量等数据的采集。 （4）全国铁路集装箱办理站历年的到发量数据。不同业务类型的集装箱运量 数据：中欧中亚班列、海铁联运、内贸集装箱等。 数据主要来源为政府工作报告、铁路部门生产统计资料（主要是城市范围内 车站的分品类年度、月度数据）、国家统计局、中国铁道年鉴、全国铁路统计资 料汇编、中国交通年鉴、铁路部门生产统计数据，国家统计局，托运人选择行为 调查问卷。 输出结果形式为年度、季度、月度城市、货运站点、货运中心、铁路局铁路 集装箱发送接收总量的预测数据和历史数据以及主要货物品类发送量的趋势图形 化分析展示功能。 铁路集装箱运量需求预测系统数据采集模块主要实现一是把文件中的货运历 史数据存入计算机系统数据库中，可以对数据进行存储、查询和统计；二是设置 未来数据录入接口，可进行货运数据的拓展，为铁路集装箱运输智能化发展决策 支持。对于现有的数据，货运需求预测系统除了对货运未来发展趋势进行预测， 不仅仅要实现简单的历史数据查询、统计功能，而且还要实现再进一步的对现有 历史数据进行分析利用，通过实现数据分析对铁路集装箱运输需求提供的决策支 持，不仅能智能地将最重要的信息展示给领导，还要将现有的数据成为决策的可 靠依据。
5.2.3 预测模型管理模块
当月度运输需求预测的数据量增加时，为使预测效果更好通过预测模型管理 模块训练不同的数据来选择不同预测模型。当年度运输需求预测的数据量增加时， 为使预测效果更好通过预测模型管理模块训练不同的数据来选择不同的模型，及
61

北京交通大学硕士专业学位论文

铁路集装箱运量运输需求预测系统设计与实现

通过相关数据训练城市铁路货运发送量预测模型参数、大宗货物发送量发展趋势 预测模型参数、典型通道主要 O/D 间竞争性货物品类的运输需求预测模型参数。
5.2.4 可视化展示模块
可视化展示模块功能为：通过查询展示历史铁路集装箱运量及影响因素演化 特征；年度、季度影响因素指标：GDP、第二产业增加值、工业增加值、第二产 业增加值占 GDP 的比重、工业增加值占 GDP 的比重、进出口总额等；铁路营业 里程（年度）、公路货运量（年度、月度）、公路货物周转量（年度、月度）；去 产能政策、公转铁政策、多式联运政策等，以提纲式页面文字信息采集等国家政 策。Spearman 秩相关系数分析，通过 Spearman 秩关联度分析 2007 年至今铁路集 装箱运量与各个影响因素的关联度，并进行相关统计检验，筛选有效结果并根据 系数值大小排序，从而得到主导铁路集装箱运输需求变化的影响因素。将本研究 所提出 ARIMA-SAPSO-DBN 模型等模型预测值展示在出来。
由于原始数据往年的数据格式不严格，数据存储不规范，异常值较多。首先 进行数据清洗，补充缺失值等操作，在本系统中的历史数据不便直接做实验就是 由于铁路集装箱运输多年前使用过 10 英尺、45 英尺箱等尺寸的集装箱，需要计 算统一的标准箱单位；还有由于以前是人工录入数据，有一些数据不正常则需要 异常值检测。然后根据研究的问题集装箱运量预测，将各个集装箱发货站的历年 的条目数据提取出来，经过时间粒度外推为月度数据，计算出全国和某区域的历 年月度集装运量历史数据，然后倒入预测模型模块，进行实验并将结果通过可视 化图表展示出来。
通过提供丰富的可视化设计组件，包括常用的数据图表、图形、控件以及具 有 3D 效果的地图组件等，将货运数据转换成图形或图像在屏幕上显示出来，进 行交互处理，包括集装箱流量预测、分品类集装箱流量预测、全国铁路货运量预 测等，可以实现人机交互，通过可视化展示得到更多的数据信息。
5.3 系统设计与实现
该节描述的铁路集装箱运量需求预测系统的技术架构以及所用的实现语言。
5.3.1 系统技术架构
系统的实现技术为 B/S（Browser/Server, 浏览器/服务器）的结构。如图 5-2 所
62

北京交通大学硕士专业学位论文

铁路集装箱运量运输需求预测系统设计与实现

示，铁路集装箱运量需求预测系统分为数据采集，数据管理，预测模型管理与可视 化展示模块。

图 5-2 铁路集装箱运量需求预测系统总体技术架构图 Figure 5-2 Technical Architecture of railway Container traffic demand forecasting system
（1）数据采集模块 数据采集有人工采集提交到系统和与不同的系统对接将数据采集过来。如图 5-3 所示，当不同格式的文件提交过来，首先通过页面导入控件，然后传入 JAVA 后台，储存在数据库中。
图 5-3 数据采集模块技术架构图 Figure 5-3 Technical architecture diagram of data acquisition module
（2）预测模型管理模块 预测模型管理模块利用 Python 写好相应的算法函数，然后打包成 jar 包供 Java 调用。或者有些时候会涉及到使用 Java 调用 Python 展现一些二维三维图。 预测模型管理将各个预测模型设置读数据接口及传入参数接口通过训练不同 的数据、不同的参数得到不同的预测结果。这样可以直接选择合适的对应的参数
63

北京交通大学硕士专业学位论文

铁路集装箱运量运输需求预测系统设计与实现

的模型。首先使用 Python 读入数据。该模块 API 设计为提供读取数据的功能， 将数据处理模块的以及处理好的适用于预测模型管理模块结构的数据传递给预测 模型管理模块。使用 python 语言将算法实现，使用 Jython 语言把 python 程序编译 为 java 的 jar 包，并设计好读数据接口及修改参数的接口，输出为预测结果及精 确度。
（3）可视化展示模块 可视化展示模块利用前端开源框架 vue.js 实现，利用 Echarts 组件来实现前端 图表与地图展示页面。 系统开发环境环境软件环境为 Windows 10 家庭版 64 位系统，开发语言为 java，HTML，Echarts，JavaScript；数据库为 Mysql，版本为 5.6.37。开发工具为 IntelliJ IDEA 2019.2。
5.3.2 系统实现展示
铁路集装箱运量需求预测系统主要包括了不同用户角色登录不同界面功能、 基础历史数据采集管理功能、预测模型管理功能、可视化展示功能包括集装箱运 输实时监控功能、集装箱预测信息查询功能四个功能模块。
（1）历史基础数据的可视化展示

图 5-4 历史基础数据展示页面 Figure 5-4 Historical data display page
历史基础数据展示页面如图 5-4 所示，主要包括以数据表展示包括但不限于
64

北京交通大学硕士专业学位论文

铁路集装箱运量运输需求预测系统设计与实现

铁路货运站点为分析点的数据表，以铁路局为分析点的数据表等等；以及对数据 表数据通过雷达图进行展示，直观看到每个分析点的特征；散点图，饼状图，条 状图，曲线图对数据表进行多角度展示分析，方便工作人员对数据分析，维护， 并为管理人员提供决策支持。
（2）铁路集装箱运量预测展示页面 铁路集装箱运量预测展示页面如图 5-5 所示，对铁路集装箱运量预测结果进 行展示。通过选择全国，某区域、某省份、某铁路局、某铁路线、某货运中心等 等角度利用 ARIMA-SAPSO-DBN 预测模型进行预测未来几月的集装箱运量，以 及铁矿石原矿产量、原油产量等相关影响因素与集装箱运量的 Spearman 秩相关系 数值展示。

图 5-5 集装箱运量预测及相关系数分析展示页面 Figure 5-5 Container volume forecast and correlation coefficient analysis display page
5.4 本章小结
本章主要介绍了铁路集装箱运量需求预测系统的需求分析、功能设计和实现, 通过该系统 demo 模拟对铁路集装箱运输进行实时监控，提高集装箱运输调度管 理和运输效率和预测结果展示为集装箱运输的智能化发展提供支持。
65

北京交通大学硕士专业学位论文

总结与展望

6 总结与展望
本章对本研究进行系统性总结以及分析本次研究需要改进的地方，以及未来 的研究发展方向。

6.1 总结
随着国家推行多式联运发展，货运逐渐向集装箱化发展。铁路集装箱运输必 定随之发展，这其中涉及到集装箱实体箱的调度问题，铁路集装箱运输情况实时 监控，以便铁路管理部门更好管理，这些信息传输到公路运输，水路运输相关公 司也方便他们调度安排车辆，船只的运输，为运输的高效联动发展提供助力。
本文的创新点主要有： （1）提出了基于 Sigmoid 函数的且结合两步优化步骤的改进粒子群优化算法， 实验得出优化深度置信网络结构短期内找到全局最优解，提高的神经网络模型结 构寻找效率。 （2）设计并实现 ARIMA-SAPSO-DBN 混合预测模型，该预测算法利用 ARIMA 时间序列算法分析了铁路集装箱运量数据随时间变化的季节性，周期性 特征同时结合了利用深度置信网络(DBN)将影响因素作为输入数据的对于铁路集 装箱运量预测，这样既分析了铁路集装箱运量数据本身的时间序列特点又结合外 部因素如铁矿石原石产量，原油产量等等因素对铁路集装箱运量的影响，全面的 对铁路集装箱运量进行预测，实验证明对比传统只考虑单一角度的预测算法本研 究提出的 ARIMA-SAPSO-DBN 混合模型算法预测精确度较高。 （3）ARIMA-SAPSO-DBN 混合预测模型中在子模型混合过程中创造性的引 入了对于子模型系数进行 ARIMA 时间序列分析，并得到对应得 ARIMA 预测模 型，在测试集上实验证明得出经过上述步骤后预测精度提高。

6.2 展望
多式联运是未来货运发展的趋势，就更需要信息化以及这三方以及寄货方， 收货方的信息交流，提前对于集装箱，车辆，船只的提前调度统筹安排的极有必 要，所以以后研究方向为：（1）结合其他深度学习方法和时间序列模型，如深度 自编码、马尔可夫链等研究短期集装箱运量预测准确度高的算法，如时间粒度为 周的。（2）通过计算 Spearman 秩相关系数找到与铁路集装箱运量更为相关的影响 因素指标，将进一步提高预测精度。
66

北京交通大学硕士专业学位论文

参考文献

参考文献
[1] 王鸿鹏. 国际集装箱运输与多式联运[M]. 大连海事大学出版社, 2010:3-4. [2] 孙家庆. 集装箱多式联运[M]. 中国人民大学出版社, 2010:5. [3] 周红云. 利用好战略机遇期大力促进铁路集装箱多式联运发展《"十三五"铁路集装箱
多式联运发展规划》解读[J]. 大陆桥视野, 2017, 000(011):56-58. [4] 伊然. 国务院印发《"十三五"现代综合交通运输体系发展规划》 [J]. 工程机械,
2017(04):74. [5] 彭其渊, 闫海峰, 魏德勇. 集装箱班列运输组织[M]. 四川出版集团, 2005:17. [6] 尚永辉. 打破多式联运间的信息壁垒[J]. 中国物流与采购, 2016(23):98. [7] 张小强, 李保轶, 吴桐等. 铁路集装箱班列开行方案与定价综合优化研究[J]. 铁道学
报, 2018, 40(11):5-12. [8] 杨清波. 集装箱铁路多式联运箱型及办理站[M]. 中国铁道出版社, 2008:8. [9] 顾彦召. 实际利率、通货膨胀溢价及预期通货膨胀率的预测--基于 ARIMA 模型的研
究[D]. 厦门大学, 2018:35-40. [10] 陈颖. 基于时间序列分析方法的金融数据研究[D].大连理工大学,2019:51-55. [11] 李媛媛. 基于相空间重构和 SVR 的短时间交通流预测方法研究[D].北京交通大
学,2018:45-50. [12] 吴华稳. 混沌时间序列分析及在铁路货运量预测中的应用研究[D].中国铁道科学研究
院,2014:61-65. [13] Yin S, Jiang Y, Tian Y, et al. A Data-Driven Fuzzy Information Granulation Approach for
Freight Volume Forecasting[J]. Industrial Electronics, IEEE Transactions on, 2017, 64(2):1447-1456. [14] Feng F, Li W, Jiang Q. Railway freight volume forecast using an ensemble model with optimized deep belief network[J]. IET Intelligent Transport Systems, 2018, 12(8):851-859. [15] Xu Y, Xie H, Wu L. Analysis and forecast of railway coal transportation volume based on BP neural network combined forecasting model[C]//AIP Conference Proceedings. AIP Publishing, 2018, 1967(1):42-52. [16] Liu J, Ou G, Guo Z. Regional Freight Volume Forecasting with Incomplete Data of Origin/Destination Freight Volumes[C]//2018 IEEE International Conference on Industrial Engineering and Engineering Management (IEEM). IEEE, 2018,1832(2):839-843. [17] Guo Z, Fu J. Prediction Method of Railway Freight Volume Based on Improved Neural Network[C]//2nd International Conference on Electronics, Network and Computer Engineering (ICENCE 2016). Atlantis Press, 2016,765(4):123-137. [18] Zhou C, Tao J. Freight volume forecasting based on a decompose–ensemble method[C]//Proceedings of the Institution of Civil Engineers-Transport. Thomas Telford Ltd, 2015,168(6): 552-569. [19] Zhao Z , Chen W , Wu X , et al. LSTM network: a deep learning approach for short-term traffic forecast[J]. Intelligent Transport Systems Iet, 2017, 11(2):68-75.

67

北京交通大学硕士专业学位论文

参考文献

[20] Moscoso-López J, Turias T, Come J, et al. Short-term Forecasting of Intermodal Freight Using ANNs and SVR: Case of the Port of Algeciras Bay[J]. Transportation research procedia, 2016,18(1):108-114.
[21] Westin J, Vierth I, Dejong G, et al. Analyzing model uncertainty and economies of scale of the Swedish national freight model to changes in transport demand[J]. European Journal of Transport and Infrastructure Research, 2016, 16(4): 619-632.
[22] Dasgupta S, Osogami T. Nonlinear Dynamic Boltzmann Machines for Time-series Prediction[C]// Thirty-First AAAI Conference on Artificial Intelligence (AAAI) 2017, 2017, 134(12): 87-105.
[23] Ren Y, Suganthan N, Srikanth N, et al. Random vector functional link network for short-term electricity load demand forecasting[J]. Information Sciences, 2016, 12(3):15-28.
[24] 贾飞跃, 韩晓龙. 基于因子分析和曲线拟合的集装箱吞吐量预测[J]. 上海海事大学学 报, 2019, 40(2):18-22.
[25] 郭雪. 基于集成预测模型的集装箱吞吐量预测研究[J]. 物流科技, 2019, 042(006):98103.
[26] 冯宏祥, Manel G, Agusti M, 等. 基于数据分解的上海港集装箱吞吐量预测模型[J]. 中 国航海, 2019, 42(2):132-138.
[27] 朱庆辉, 勾翔宇. 基于小波神经网络的上海港集装箱吞吐量预测[J]. 中国水运(上半 月), 2019, 1(6):25-27.
[28] 吴 建 新 . 基于 ALI 模型的 沿 海 港 口 集 装 箱 吞 吐量 短 期 预 测 分 析 [J]. 港口 经 济 , 2016(9):25-30.
[29] 汤银英, 李龙. 基于 Holt-Winters 模型的铁路月度货运量预测研究[J]. 交通运输工程 与信息学报, 2017,15(2):1-5.
[30] 梁宁, 耿立艳, 张占福, 梁毅刚. 基于 GRA 与 SVM-mixed 的货运量预测方法[J]. 交通 运输系统工程与信息, 2016,16(06):94-99.
[31] Hauke J, Kossowski T. Comparison of values of Pearson's and Spearman's correlation coefficients on the same sets of data[J]. Quaestiones geographicae, 2011,30(2):87-93.
[32] Dodge Y. Spearman Rank Correlation Coefficient[M]//The Concise Encyclopedia of Statistics. Springer New York,2008,5(8):502-505.
[33] Ivanescu M, Wichterich M, Beecks C, et al. The ClasSi coefficient for the evaluation of ranking quality in the presence of class similarities[J]. 中国高等学校学术文摘·计算机科 学, 2012, 6(5):568-580.
[34] Wang D, Tan D, Liu L. Particle swarm optimization algorithm: an overview[J]. Soft Computing, 2017,22(2):387-408.
[35] Guochu C, Jinshou Y. Particle Swarm Optimization Algorithm[J]. Information & Control, 2005,186(3):454-458.
[36] Cowpert W, Paul P, Met C, Andrew V. Time Series Data[M]. Springer New York, 2009:1215.
[37] Mishra N, Soni H, Sharma S , et al. Development and Analysis of Artificial Neural Network Models for Rainfall Prediction by Using Time-Series Data[J]. International Journal of Intelligent Systems & Applications, 2018, 10(1):16-23.

68

北京交通大学硕士专业学位论文

参考文献

[38] Gass J, Saul I, Fu L, Michael C. ARIMA[M]//Encyclopedia of Operations Research and Management Science. Springer US, 2013:77.
[39] De M, Cyrino L. Forecasting mid-long term electric energy consumption through bagging ARIMA and exponential smoothing methods[J]. Energy, 2018,144(1):776-788.
[40] Almusaylh S, Deo C, Adamowski F, et al. Short-term electricity demand forecasting with MARS,SVR and ARIMA models using aggregated demand data in Queensland[J]. Advanced engineering informatics, 2018,35(1):1-16.
[41] Marshall A. Neural networks for pattern recognition[J]. Neural Networks, 1995,8(3):493– 494.
[42] Jürgen F, Schmidhuber E. Deep Learning in neural networks: An overview[J]. Neural Networks, 2015,61:85-117.
[43] Isik E, Inalli M. Artificial neural networks and adaptive neuro-fuzzy inference systems approaches to forecast the meteorological data for HVAC: The case of cities for Turkey[J]. Energy, 2018, 154(7):7-16.
[44] Hinton G. Deep belief networks[J]. Scholarpedia, 2009,4(6):5947. [45] Zhao L, Zhou Y, Lu H, et al. Parallel computing method of deep belief networks and its
application to traffic flow prediction[J]. 2019,163(1):972-987. [46] Zhang Y, Le J, Liao X, et al. A novel combination forecasting model for wind power
integrating least square support vector machine, deep belief network, singular spectrum analysis and locality-sensitive hashing[J]. Energy, 2019,168(2):558-572. [47] Willmott C, Matsuura K. Advantages of the mean absolute error (MAE) over the root mean square error (RMSE) in assessing average model performance[J]. Climate Research, 2005,30(1):79-82. [48] Chai T, Draxler R. Root mean square error (RMSE) or mean absolute error (MAE)? – Arguments against avoiding RMSE in the literature[J]. Geoscientific Model Development, 2014,7(3):1247-1250. [49] 李航. 统计学习方法[M]. 清华大学出版社, 2012:66-67.

69

北京交通大学硕士专业学位论文

作者简历

作者简历
一、作者简历 姓名：闫玉波 籍贯：山西忻州
二、教育经历 2018 年 9 月至 2020 年 7 月就读于北京交通大学计算机与信息技术学院，专业为计算机技 术，攻读工程硕士研究生。
三、攻读学位期间发表的论文 [1]闫玉波.基于深度学习的铁路集装箱发送量预测（B 级刊《统计与决策》已录用）（一作）
四、参与科研项目 [1]铁路客货流需求预测技术及应用系统研究，科技部重点研发计划，国家铁路集团 [2]中欧班列信息平台，国家铁路集团研究课题 [3]铁路集装箱大数据平台研究，中铁集装箱公司

70

北京交通大学硕士专业学位论文

独创性声明

独创性声明
本人声明所呈交的学位论文是本人在导师指导下进行的研究工作和取得的研 究成果，除了文中特别加以标注和致谢之处外，论文中不包含其他人已经发表或撰 写过的研究成果，也不包含为获得北京交通大学或其他教育机构的学位或证书而 使用过的材料。与我一同工作的同志对本研究所做的任何贡献均已在论文中作了 明确的说明并表示了谢意。

学位论文作者签名：

签字日期：

年月 日

71

北京交通大学硕士专业学位论文

学位论文数据集

学位论文数据集

表 1.1： 数据集页

关键词*

密级*

中图分类号*

UDC

论文资助

集装箱运量； 铁路货运预 测；深度置信

公开

[U2-9]

国家重点研发计划资 助（2018YFB1201401， 高速铁路成网条件下

网络；混合模

铁路客货运服务模式

型

设计与资源配置技

术）

学位授予单位名称*

学 位 授 予 单 位 代 学位类别* 码*

学位级别*

北京交通大学

10004

工程硕士

硕士

论文题名*

并列题名

论文语种*

基于混合模型的铁路货运需 Research on the application of hybrid 中文

求预测方法研究

model in railway freight demand

forecasting

作者姓名*

闫玉波

学号*

18140044

培养单位名称*

培养单位代码* 培养单位地址 邮编

北京交通大学

10004

北京 市海淀区 100044 西直门外上园

村3号

工程领域*

研究方向*

学制*

学位授予年*

计算机技术

数据与知识工 2 程

2020

论文提交日期 2020 年 7 月

*

导师姓名*

任爽

职称*

副教授

评阅人

答辩委员会主席*

答辩委员会成员

胡绍海

黎琳，刘美琴

电子版论文提交格式 文本（ ） 图像（ ） 视频（ ） 音频（ ） 多媒体（ ） 其他（ ）

推荐格式：application/msword；application/pdf

电子版论文出版（发布）者

电子版论文出版（发布）地

权限声明

论文总页数* 71 共 33 项，其中带*为必填数据，为 22 项。

72

