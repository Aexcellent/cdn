大连海事大学学报 Journal of Dalian Maritime University ISSN 1006-7736,CN 21-1360/U

《大连海事大学学报》网络首发论文

题目： 作者： 收稿日期： 网络首发日期： 引用格式：

基于班列抵港模式的海铁联运堆场箱位分配优化 任刚，靳志宏，庞毛毛，王小寒 2021-08-25 2021-11-09 任刚，靳志宏，庞毛毛，王小寒．基于班列抵港模式的海铁联运堆场箱位分 配优化[J/OL]．大连海事大学学报. https://kns.cnki.net/kcms/detail/21.1360.U.20211109.1451.004.html

网络首发：在编辑部工作流程中，稿件从录用到出版要经历录用定稿、排版定稿、整期汇编定稿等阶 段。录用定稿指内容已经确定，且通过同行评议、主编终审同意刊用的稿件。排版定稿指录用定稿按照期 刊特定版式（包括网络呈现版式）排版后的稿件，可暂不确定出版年、卷、期和页码。整期汇编定稿指出 版年、卷、期、页码均已确定的印刷或数字出版的整期汇编稿件。录用定稿网络首发稿件内容必须符合《出 版管理条例》和《期刊出版管理规定》的有关规定；学术研究成果具有创新性、科学性和先进性，符合编 辑部对刊文的录用要求，不存在学术不端行为及其他侵权行为；稿件内容应基本符合国家有关书刊编辑、 出版的技术标准，正确使用和统一规范语言文字、符号、数字、外文字母、法定计量单位及地图标注等。 为确保录用定稿网络首发的严肃性，录用定稿一经发布，不得修改论文题目、作者、机构名称和学术内容， 只可基于编辑规范进行少量文字的修改。
出版确认：纸质期刊编辑部通过与《中国学术期刊（光盘版）》电子杂志社有限公司签约，在《中国 学术期刊（网络版）》出版传播平台上创办与纸质期刊内容一致的网络版，以单篇或整期出版形式，在印刷 出版之前刊发论文的录用定稿、排版定稿、整期汇编定稿。因为《中国学术期刊（网络版）》是国家新闻出 版广电总局批准的网络连续型出版物（ISSN 2096-4188，CN 11-6037/Z），所以签约期刊的网络版上网络首 发论文视为正式出版。

2021-11-09 16:06:12 https://kns.cnki.net/kcms/detail/21.1360.U.20211109.1451.004.html

收稿日期：2021-08-25；修回日期：2021-11-07。 基金项目：国家自然科学基金项目（72172023）；辽宁省自然科学基金联合基金项目（2020HYLH49），
大 连 市 领 军 人 才 项 目 （ 2018-573 ）； 中 央 高 校 基 本 科 研 业 务 费 专 项 资 金 资 助 项 目 （3132019301）。 作者简介：任 刚（1976 — ），男，博士生，研究方向：交通运输规划与管理。 靳志宏（1963 — ），男，博士，教授，博士生导师，研究方向：物流工程与管理。 庞毛毛（1993 — ），女，硕士，研究方向：物流工程与管理。 王小寒*（1993 — ），女，博士生，研究方向：物流工程与管理。 E-mail： wangxh@dlmu.edu.cn。
基于班列抵港模式的海铁联运堆场箱位分配优化

任 刚 1,2，靳志宏 1，庞毛毛 1，王小寒 1,*
(1. 大连海事大学 交通运输工程学院，辽宁 大连 116026； 2. 大连金港联合汽车国际贸易有限公司，辽宁 大连 116601)
摘要：海铁联运堆场箱位分配对提高堆场作业效率及减少班列在港周转时有着重要影响，本文通过分析班列抵港模式及 其作业特点，确定翻箱操作和场桥移动距离是影响集装箱箱位分配的关键因素。基于抵港班列入场顺序和离港时间，以 最小化压箱量和最小化场桥移动贝位数为目标，构建海铁联运进口箱的箱位分配优化模型，并利用 Cplex 对模型的正确 性进行验证。针对模型和问题特点，设计了启发式算法求解大规模现实问题，通过与最低栈堆存策略对比，证明了提出 的箱位分配优化策略可有效降低压箱量。在此基础上，分析了作业箱规模和抵港班列数量两个影响因素对优化效果的影 响，可为海铁联运堆场的箱位分配决策提供理论支撑。
关键词：班列抵港；海铁联运；箱位分配；压箱量；场桥移动；启发式算法
中图分类号： U169.65 文献标志码：A
Optimization of container slot allocation in sea-rail intermodal terminal based on train-to-port mode
REN Gang1, 2, JIN Zhi-hong1, PANG Mao-mao1, WANG Xiao-han 1,* (1. Transportation Management College, Dalian Maritime University, Dalian 116026, China;
2. Dalian United King Port Auto Trade Co., Ltd., Dalian 116601, China)
Abstract: The slot allocation of the sea-rail intermodal terminal has a significant impact on improving the efficiency of handling efficiency and reducing the turnaround time of trains. This paper analyzes the operating characteristics of the train-to-port mode. The overlapping amounts and the movement distance of yard crane are determined as two key factors affecting container slot allocation. Comprehensive consideration of the established arrival sequence of containers and departure time of the train, the optimization model of slot allocation of import containers in sea-rail intermodal transportation is developed to minimize the overlapping amounts and the move number of yard crane. According to the characteristics of model, a heuristic algorithm is designed to obtain solutions. Cplex solver is used to verify the correctness of the model and the validity of the algorithm. Comparing with the lowest stacked strategy, it is proved that the slot allocation strategy we proposed can effectively reduce the overlapping amounts. The experiment discuss the effects of container number and arrival number for trains, which provide decision supports for the sea-rail intermodal terminal.
Key words: train-to-port; sea-rail intermodal transportation; container slot allocation; overlapping amounts; crane movement;
heuristic algorithm

0 引 言
近年来，因集成海运和铁路两种运输方式的 优势，我国海铁联运业务在综合交通运输体系中 逐渐占据越来越大的比重。为实现海铁联运的无

缝衔接，班列抵港模式成为了未来发展趋势和研 究热点。海铁联运转运节点的有效衔接是影响集 装箱海铁联运可靠性和运输效率的关键因素。随 着多式联运的发展，各港站间的竞争愈加激烈， 如何提高转运节点的作业效率和经营效益，实现

港站资源的合理化利用，是提高海铁联运核心竞 争力的关键。在海铁联运业务中，由于班轮和班 列的到港时间和运输批量不完全匹配，“海-堆场铁”成为我国最常见的海铁联运堆存模式[1]。在港 堆存和装卸过程中，由于堆存位置的不合理，会 造成翻箱作业的无效操作，并且，海铁联运堆场 空间资源及设备资源有限，为提高堆场作业效率， 应尽可能降低提箱过程产生的压箱量与场桥负重 移动距离。因此，以海铁联运进口箱为例，研究 班列抵港模式下的箱位分配问题，从而促进堆场 资源的高效利用。
堆场资源分配问题主要包括两方面，其一是 堆存空间分配问题，其二是堆存位置指派问题. 在堆存空间分配方面，国内外学者通常以箱区间 作业量均衡[2-4]、集装箱移动距离或移动成本最小 [4-6]等为目标，将到离港集装箱分配至堆场箱区; 部分学者研究堆场空间资源共享问题[1,7]。堆存位 置指派问题是将到达港站的集装箱指派至具体的 箱位，即箱位分配问题，在此方面，国内外学者 对集装箱码头的研究较为成熟，为本文研究提供 了良好的基础与借鉴。
在码头堆场箱位分配方面，Chen 和 Lu[4]以翻 箱量最小为目标，提出混合序列堆存算法解决箱 位指派问题。Lee 等[8]以倒箱量最小为目标构建模 型，并结合邻域搜索和启发式规则设计算法解决 预倒箱问题。范厚明等[9]考虑出口箱装船和预约 信息，以提箱任务总时间最短为目标，集成优化 堆场箱位分配与多场桥调度问题，并设计文化基 因算法求解模型。靳志宏等[10]将提箱装船过程中 的翻箱作业调度优化问题归结为一个动态最短路 径问题，以降低总翻箱次数为目标，设计嵌入启 发式规则的混合动态规划算法求解贝位内翻箱问 题。邵乾虔等[11]运用马尔科夫链处理出口箱随机 交箱序列，以预翻箱量最小和场桥移动距离最短 为目标构建场桥堆存调度两阶段模型。
与码头堆场相比，国内外对海铁联运堆场和 铁路中心站堆场的箱位分配问题的相关研究处于 初始阶段。计明军等[12]以堆场压箱量最小为目标， 建立动态箱位指派模型解决海铁联运堆场箱位指 派问题。Wang 等[13-14], Chang 等[15-17]等在研究中 心站堆场箱位分配问题时，均是以压箱量最小为 目标构建模型，并设计启发式规则进行求解。段 刚等[18]探讨中心站堆场混堆箱区内零散箱的箱位 分配问题，构建以倒箱次数最小为目标的多时段

动态箱位分配模型。王小寒等[19]以轨道吊移动成 本最小化为目标，研究中心站堆场待卸载集装箱 的贝位分配问题。常祎妹和朱晓宁[20]考虑公路集 装箱随机到达和铁路集装箱成批到达特点，以压 箱量最小为目标构建中心站堆场出口箱箱位指派 模型，并设计基于马尔科夫链的启发式算法求解 问题。
综述分析可知，首先，现有文献关于海铁联 运堆场箱位分配问题的研究尚不多见；并且，与 集装箱码头公路集疏运方式相比较而言，铁路集 疏运方式具有发班时间确定、运输批量大等显著 特点，这些特点对于海铁联运的运作模式以及箱 位分配具有重要影响。其次，海铁联运码头堆场 的结构布局和资源配置等方面与码头堆场存在较 大的差异，因此码头堆场箱位分配成果难以直接 套用至海铁联运堆场箱位分配问题中。最后，已 有研究大多考虑集装箱在单贝位间的箱位分配问 题，忽略了场桥在多贝位间移动对箱位指派的影 响。同时，在求解目标方面，现有的箱位分配大 多以翻箱量或压箱量最小为目标，很少考虑作业 设备的有效利用。因此，本文依据海铁联运堆场 实际作业情况，研究班列抵港模式下的海铁联运 进口箱的箱位分配问题，综合考虑减少提箱过程 产生的压箱量和场桥移动贝位数双重目标构建优 化模型。根据问题规模，线性化处理模型并借助 Cplex 求解小规模问题，设计启发式算法求解大规 模问题，从而有效提高海铁联运堆场空间资源和 装卸资源的利用率，为海铁联运堆场的实际运营 提供理论支撑。
本文创新点包括三部分，一是提出压箱量和 场桥移动距离综合影响箱位分配问题；二是基于 班列抵港模式，解决海铁联运堆场箱位分配问题； 三是根据所研究问题特点，设计启发式规则求解 大规模问题。
本文的主体研究布局如下：第 1 节对班列抵 港模式下的海铁联运箱位分配问题进行细致描述， 提出压箱量和场桥移动距离是影响箱位分配的重 要因素；第 2 节构建了双目标非线性规划模型； 在第 3 节，为验证模型的正确性，针对小规模算 例，借助 Cplex 求解器求解线性化处理后的模型， 并与最低栈策略进行对比实验；第 4 节针对大规 模算例，设计了启发式算法求解问题，通过与 Cplex 结果对比验证了算法有效性，并对不同任务

规模和班列数量进行灵敏度分析；第 5 节为全文 的结论，并提出了下一步的研究展望。
1 问题描述
海铁联运堆场空间布局如下图 1 所示，包括 码头前沿、堆场、铁路装卸线、泊位等空间资源， 以及岸桥、场桥、集卡、轨道吊等装卸资源。班 列抵港模式有利于提高海铁联运转运效率，图 1 中实线箭头为海铁联运进口箱的作业流程，承载 海铁联运进口箱的班轮到港后，由集卡将集装箱 运至后方堆场，场桥将集装箱从集卡卸至堆场箱 位进行堆存；待班列进港后，场桥将集装箱由堆 场提取至集卡，运至铁路装卸线后由轨道吊将集 装箱装载至列车车厢。 海铁联运出口箱的作业流 程如图 1 虚线所示，作业方向与进口箱相反，在 此不再赘述。

铁路 装卸线

轨道吊

海铁 联运 堆场

集卡 场桥

码头 前沿
泊位

岸桥

出口箱转运流向

进口箱转运流向

图 1 班列到港模式下进出口集装作业流程 Fig.1 Import and export container operations processes
under train-to-port mode
海铁联运堆场分布着不同的箱区，图 2 为单 个箱区的布局图。每个箱区由多个贝位组成，每 个贝位由若干栈组成，每个栈由若干层组成，由 此可见，一个箱位是由贝位、栈位和层共同确定
的，例如，S 1, 4,1 表示集装箱位于 1 贝 4 栈 1 层，
即图 2 黑色方块所示。我国集装箱堆场的装卸设 备通常使用轮胎龙门吊，也被称为场桥，承担着 堆场到离箱的装载、卸载和移动操作任务。
场桥移动距离是指在提箱过程中场桥大车在 贝位间移动距离之和。场桥移动速度缓慢且作业 成本较高，因而堆场作业时应尽可能减少场桥大 车移动。集装箱箱位分配方案直接影响着场桥移 动距离，若待提取箱分布散乱，将会导致场桥频 繁往返移动，而分布相对集中有助于减少场桥无

效空载移动，进而提高场桥作业效率。由于贝位 长度一致，场桥大车移动距离是移动贝位数的整 数倍，因此在构建模型时，利用场桥大车移动贝 位数代替表示场桥大车移动距离。在已知班列组 织方案的前提下，到港班列的集装箱具有“集中” 性，因而，考虑场桥移动距离，可促使箱位分配 方案具备对应的“聚类效应”。

11111

1 1 11 1 1 1 1 11 11 11 1 1

11111

层

栈位
图 2 箱区布局图 Fig. 2 Layout of the block
班列抵港模式下，集装箱入场顺序和提箱时 间是合理分配集装箱堆存位置的重要前提。集装 箱入场顺序越早，优先级越小，分配箱位时应尽 量放置于下层；提箱时间越早，优先级越大，分 配箱位时应尽量堆放于上层。
在研究箱位分配问题时，许多文献引入压箱 量来评价集装箱堆存状态[12-15]。本文从静态角度 研究箱位分配问题，因而，同样采用压箱数来评 价堆存状态。当位于同一贝位和同一栈位的 2 个 集装箱堆存上下位置关系与其相应的提箱顺序不 一致时，这 2 个集装箱间便产生了压箱。
因此，在已知集装箱入场顺序和提箱时间的 前提下，同时考虑堆场初始堆存状态，以海铁联 运进口箱为例，合理规划集装箱在箱区的堆存位 置。优化原则是应尽量减少压箱量，同时尽可能 使具备同一属性的集装箱分布集中以降低场桥移 动距离，进而提高堆场的作业能力和运营效率。
2 模型构建
2.1 前提假设 （1）待作业集装箱箱型一致，均为 40 英尺
集装箱； （2）堆场集装箱初始堆存状态已知，场桥初
始位置已知； （3）堆场作业箱的数量与入场顺序均已知； （4）班列的到港装卸计划已知，包括到港时
间、离港时间和集装箱装载计划。

2.2 符号说明 （1）集合 K ：箱区贝位集合， k  K ； J ：箱区堆栈集合， j  J ；

I ：箱区层集合， i,i ' I ； N ：作业箱集合，n,n' N ，同时，数值大小
代表到场顺序， nn' 越小说明入场顺序越靠前，

越大则入场顺序越靠后； L ：抵港班列集合， l  L 。 （2）参数 Wk ：贝位 k 的最大堆存箱量； H kj ：贝位 k 内的第 j 栈最高可堆存集装箱层
数；

bl ：班列 l 离开码头时间；
S k, j,i ：堆场箱位索引，即表示贝位 k 内第

j 栈 i 层的箱位；

Okji ：若箱位 S k, j,i 已被占用，Okji 取 1，否

则， Okji 取 0；  ：贝位堆存密度系数；

Tnl ：若集装箱 n 由班列 l 提取， Tnl 取 1，否

则， Tnl 取 0； M ：一个充分大的正数。 （3）决策变量

Sn kji

： 0-1

变量，若集装箱 n 堆放在箱位

S

k,

j,i

上，则

Sn kji

=1

；否则，

Sn kji

=0

。

Rkji(iz) ：0-1 变量，若堆放在箱位 S k, j,i 的

集装箱的离场时间晚于堆放于箱位 S k, j,i  z

的 集 装 箱 ， 则 Rkji(iz) =1 ； 否 则 Rkji(iz) =0 ， 其 中 z  1, 2,...,i 1 。 2.3 数学模型
（1）目标函数 为减少提箱过程中产生的翻箱，同时优化装 卸设备的性能，提高海铁联运集装箱转运效率，

本文考虑最小化场桥移动贝位数 P1 和最小化压 箱量 P2 两个目标函数，构建双目标箱位指派优化 模型。

     P1= min

k



Sn kji



k



S n1 kji

（1）

nN kK jJ iI

kK jJ iI

    P2 = min

Rkji (i  z )

kK jJ iI \{1} z[1,i 1]

（2）

式（1）中若

Sn kji

=1

表示集装箱

n

被分配至贝

位

k

，则

k



Sn kji

表示当装载集装箱

n

时，场桥大车

位于贝位 k 处，进而

    k



Sn kji



k



S n1 kji

可表示为装载两

kK jJ iI

kK jJ iI

个顺序相邻的集装箱的贝位差，即可理解为箱位

分配时需考虑的场桥移动距离。式（2）计算了压

箱量，当上层集装箱离港时间晚于下层集装箱，

便产生了压箱，计算原理如约束（11）-（12）。

为便于求解，将双目标优化问题转化为单目

标优化问题，经先验性实验，两个目标的量纲一

致，因而，箱位分配优化目标 f 设置如下式（3）。

min f  P1  P2





     

k



Sn kji



k



S n1 kji



 min  nN kK jJ iI

kK jJ iI



    


Rkji(i z)

 

 kK jJ iI \{1} z1,2,...,i 1



（3）

（2）约束条件

Sn kji

 1,n  N

kK jJ iI

（4）

 Sn kji

 1 Okji ,k

 K,

j  J,i  I

nN

（5）

  Sn kji



Sn kj (i 1)

 Okj(i1) , k

 K,

j



J,i

I

\ {1}

nN

nN

（6）

 Sn kj (i z )

 1 Okji , k

 K,

j

J,

nN

i  I \ 1, z 1, 2,...,i 1

（7）

   Sn kji



Okjt  Wk  ,k  K （8）

nN jJ iI

jJ iI

 Sn kji

Hkj ,k  K,

jJ

iI nN

（9）

Sn kji

Sn' kji

'



n



n

'

i



i

'

1



0,

（10）

k  K, j  J ,n, n '  N,i,i '  I

      MRkji(iz) 

Tnl

bl

Sn kji



Tnl bl

S  O , n kj (i z )

kj (i z )

nN lL

nN lL

k  K, j  J ,i  I \{1}, z 1, 2,...,i 1

（11）

      MRkji(iz) 

Tnl

bl

Sn kji



Tnl bl

S  O n kj (i z )

kj (i z )

nN lL

nN lL

  1

Sn kji

 

M

, k



K

,

j



J

,i



I

\

{1},

z

 1,

2, ..., i

1

 nN 

（12）

Sn kji

0,1,n 

N,k



K,

j



J,i

 I

（13）

Rkj(iz) 0,1,k  K , j  J , i  I \ 1, z 1, 2,...,i 1

（14）

约束（4）表示任一集装箱仅能占用一个箱位。 约束（5）表示堆场内任一箱位至多由一个集装箱 占用。约束（6）表示集装箱不可悬空放置。约束

（7）表示若 S(k, j,i) 已被占用，则其下层箱位必 不可能放置作业箱。约束（8）为堆场贝位容量限 制，即任一贝位内堆存集装箱总数不超过最大容

量约束；考虑贝位内可能发生的翻箱情况，需设

置一定的缓冲箱位，则单个贝位内可堆存集装箱

数最多为 Wk  。考虑轨道吊作业高度限制，约束 （9）规定了任一栈位的堆存高度应小于最高可堆 存高度。 若两个集装箱被分配同一贝位且同一栈

时，约束（10）表示入场时间较晚的集装箱应堆 放于入场时间较早集装箱之上。针对班列抵港模

式，约束（11）-（12）计算了压箱量；针对堆放 于同一贝且同一栈的两集装箱，若堆放于上层箱

位 S k, j,i 集装箱的装载离站时间晚于下层箱位

S k, j,i  z 的集装箱的装载离站时间，即公式右

边大于 0，此时会产生一个压箱，即 Rkji(iz) =1 。若 上层集装箱装载离站时间不晚于下层集装箱离站

 时间，即约束（11）右边项小于等于 0，且

Sn kji

=1

，

nN

根据约束（12），此时两个集装箱不产生压箱，即

   Rkji(iz) =0 ，或者当

Sn kji

=0

表示上层箱位

S

k, j,i

nN

未 分 配 集 装 箱 ， 同 样 ， 根 据 约 束 （ 12 ） 可 表 示

Rkji(iz) =0 。约束（13）-（14）为变量的取值范围 约束。

3 模型求解

堆场箱位分配问题属于 NP-hard 问题[9]。本

文所构建的海铁联运堆场箱位分配优化模型是非

线性规划模型，通过对模型进行线性化处理，小

规模算例可借助 Cplex 等求解器得出精确解，从

而可验证模型的正确性和逻辑性。

3.1 模型线性化处理

如上所述，本文所构建模型为非线性规划模

型，非线性主要体现在式（10）。为便于使用 Cplex

求解器对模型正确性进行验证，需要对式（10）

  进行线性化处理。定义辅助变量

X kj (n,i)(n',i ')



0,1

，

满足

X kj (n,i)(n ',i ')



S S n n' kji kji '

，其含义是指若集装箱

n

分

配 至 箱 位 S(k, j,i) 且 集 装 箱 n ' 分 配 至 箱 位

S(k,

j,i ')

，则

X kj (n,i)(n',i ')



1

，否则，

X

kj ( n,i )(

n

',i

')



0.

借

助该辅助变量，可将式（10）线性化为下式（15）。

 

X

kj ( n ,i )( n

',i

')

n



n

'

i



i

'

1



0

 X  S kj

n

(n,i)(n ',i ')

kji

 

X

kj (n,i

)(

n

',i

')



Sn' kji '

 kj  X (n,i)(n ',i ')



Sn kji



Sn' kji

'

1

  


X

kj (n,i

)(

n

',i

')



0,1

k  K, j  J ,n, n '  N,i,i '  I

（15）

3.2 小规模算例验证 为验证模型的正确性，及本文提出的箱位分

配方法和有效性。针对小规模算例，借助 ILOG Cplex12.6.2 求解器对模型进行求解。运算环境为 Windows10 操作系统的 i7-3770 CPU 处理器。
假设有 40 个海铁联运进口箱待卸载至堆场 某箱区，基本信息如下表 1 所示。箱区堆存规模 为 3 贝*6 栈*4 层，堆存密度系数  为 0.9，研究 时段内有 4 辆班列抵港，班列的运输批量均为 60 个 40 英尺集装箱，4 辆班列 L1、L2、L3 和 L4 的 在港装卸时间分别为 8:00—9:00、10:00—11:00、 14:00—15:00 和 17:00—18:00。

表 1 作业箱基本信息

Tab.1 Basic information of containers

集装箱 编号
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20

入场 顺序
7 35 1 25 10 16 27 5 32 20 14 31 9 13 29 6 17 12 22 39

对应 班列
L1 L4 L2 L1 L2 L3 L2 L1 L4 L2 L1 L4 L3 L4 L1 L2 L4 L1 L3 L2

集装箱 编号
21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40

入场 顺序
21 3 8 26 18 2 30 34 23 37 33 19 28 4 15 24 11 40 36 38

对应 班列
L1 L3 L1 L2 L3 L3 L2 L2 L1 L4 L2 L3 L1 L3 L4 L2 L1 L2 L4 L1

针对表 1 中的 40 个作业箱，利用 Cplex 求解 得出的最佳箱位分配结果如下图 3 所示，每一方 格代表一个集装箱，其中，深灰色方格为堆场初 始堆存状态，白色方格为 40 个作业箱的箱位分配 方案，表示方法为（集装箱编号，对应班列），灰 色阴影表示提箱时的阻碍箱。

22,L3 23,L1 1,L1

18,L1

11,L1 26,L3 16,L2 8,L1

37,L1

13,L3 L3 3,L2 L1 14,L4 5,L2

34,L3 L3
栈1 2 压箱量 0 0
4,L1 32,L3 29,L1

L2 L4
34 00 贝位1
19,L3

L4 L2
56 00
31,L2

20,L2 2,L4

7,L2 36,L2 25,L3 21,L1

17,L4

27,L2 30,L4 28,L2 9,L4 40,L1

24,L2 L2 6,L3 L1 10,L2 35,L4

L2 39,L4 L3 12,L4 15,L1 38,L2

L2 L3
栈1 2 压箱量 0 0
图3

L3 L1 L2 L4

L2 L3 L4 L4 33,L1 L3

3 4 5 6 栈1 2 3 4 5 6

0 0 0 0 压箱量 0 2 0 0 0 0

贝位2

贝位3

小规模算例下的最佳箱位分配方案

Fig. 3 The best slot allocation plan under small-scale experiments

由图 3 可知，编号为 30 和 39 的两集装箱， 由于其对应班列 L4 的离场时间晚于下层箱位

S(1, 2,1) 的集装箱对应班列 L3 的离场时间，因而，

编号 30 和 39 的两集装箱分别对该下层集装箱产 生一个压箱，因而，压箱量为 2。场桥移动贝位数 为 2。第一次移动发生在编号为 11 与 35 两集装 箱之间，场桥由贝位 1 水平移动至贝位 2；第二 次移动发生在编号为 7 与 33 两集装箱之间，场桥 由贝位 2 水平移动至贝位 3。根据图 3 可发现装 载计划为同一班列的集装箱倾向于堆放于同一栈

位，可理解为集装箱的“聚类”效应，这种相对

集中的分布可很大程度上降低场桥移动距离，提

高装卸效率，同时有效解决了堆场翻箱问题。

3.3 最低栈策略实验结果 在实际业务中，集装箱堆场多采用最低栈策
略[9,11]进行箱位指派，即将进场集装箱依序指派至 贝位最低栈上；同时，为降低场桥多次移动，通 常考虑尽量占用同一贝位，且为避免翻箱，尽量 将离站时间早的集装箱堆放于离站时间晚的集装 箱之上。为验证本文提出的箱位分配策略和模型 的优越性和有效性，针对小规模算例，计算最低 栈策略下箱位分配方案，结果如下图 4 所示。集 装箱 3 最早入场，根据最低栈策略，其被分配至
箱位 S 1,1,1 ；然后，属于班列 L3 的集装箱 26 入

场，此时贝位 1 中的第 1、3、5、6 均为最低栈， 根据贪婪思想，班列 L3 的离港时间早于 L4，晚
于 L2，因而将集装箱 26 放置于箱位 S 1,5,2 ，以

此类推。分析图 4 可知，最低栈箱位分配策略下 的压箱量为 9，场桥移动贝位数仍为 2，同样发生

在编号为 11 与 35 两集装箱之间，以及编号为 7 与 33 两集装箱之间。因而，本文构建的箱位分配 模型可有效降低压箱量，进而验证了其优越性和 有效性。

18,L1

11,L1 14,L4

1,L1 16,L2 37,L1 23,L1 13,L3 5,L2

8,L1 L3 34,L3 L1 26,L3 22,L3

3,L2 L3 L2 L4 L4 L2
栈1 2 3 4 5 6 压箱量 0 0 1 2 0 1
贝位1

24,L2

4,L1

7,L2

20,L2

38,L2

29,L1 10,L2 32,L3 21,L1 36,L2 19,L3

31,L2 39,L4 30,L4 2,L4 40,L1 28,L2

25,L3 L2 6,L3 L1 17,L4 35,L4

L2 9,L4 L3 12,L4 15,L1 27,L2

L2 L3 L3 L1 L2 L4

L2 L3 L4 L4 33,L1 L3

栈1 压箱量 1

2 0

3 0

4 0

5 1

6

栈1

0 压箱量 0

2 1

3 1

4 0

5 0

6 1

贝位2

贝位3

图 4 最低栈策略下的箱位分配方案 Fig. 4 Slot allocation scheme under the lowest stacked
strategy
4 现实规模问题的启发式算法设计

在现实业务中，到港海铁联运箱量规模通常

较大. 且箱位分配属于 NP-hard 问题，针对大规

模算例，精确解算法难以在合适时间获得最优解。

此外，箱位指派问题的求解使用传统算法难以奏

效，依循大多数文献[12,17,20]，分析问题的本质特点，

找到适用于该问题的算法，设计箱位指派启发式

算法进行求解。

4.1 启发式算法设计 针对大规模算例，结合班列抵港模式下的集

装箱箱位分配问题特点，构建启发式算法求解问

题满意解，具体的设计思路如下：根据初始状态

下堆场堆存情况和初始场桥位置，将待作业箱指

派到贝位，判断是否满足该贝位容量约束；若满

足，则继续为该集装箱指派栈位，判断是否超过

层高限制；若未超过，则该箱位分配方案是可行

解，计算此时的压箱量及场桥移动贝位数；若不

满足贝位容量要求或栈位层高限制，则循环上述

过程。通过计算各可行解增加的压箱量和场桥移

动距离，最后确定的最佳箱位分配方案即为使得

式（3）中的目标函数值最小的解。

为更好描述启发式算法，定义下列符号：



m n

：集装箱

n

的第

m

个可行的箱位分配方案；

Fr  x ：箱位分配可行解 x 的目标函数 Pr ，

r  {1, 2} ；

F x ：箱位分配可行解 x 的总目标函数，即

F x =  Fr  x ； r{1,2} fr  x ：集装箱 x 最佳箱位分配方案对应的目
标函数 Pr ， r  {1, 2} ；
f x ：集装箱 x 最佳箱位分配方案对应的总

目标函数，即 f x =  fr  x ； r{1,2}

f

* r

：箱位分配方案最优目标值

Pr

，r



{1,

2}

；

f * ：箱位分配方案全局最优目标值；

n ：集装箱 n 的最佳箱位分配方案；  ：集装箱箱位分配方案集合。 具体的启发式算法步骤如下： Step1：确定海铁联运堆场初始堆存状态和场 桥初始位置。

Step2：初始化参数，令 n  1 ，k  1 ， j  1 ，

  m  0 ， F



0 n



M

，

，

f

*



0，

f

* r



0

。

Step 3: 如果 Okj(i1) =1 且 Okji =0 ，为集装箱 n 分 配箱位 S(k, j,i) ，判断是否满足栈位层高限制和贝

位容量限制，若满足，则该箱位是可行解，令

m



m



1

，

m n



S(k,

j,i)

，计算此可行解

m n

的目

    标函数 Fr



m n

和F



m n

；若不满足，执行 Step 5。

    Step 4: 判断是否满足

F



m n



F

 m1 n

，若

    满足，令

f

n 

F



m n

，fr n  Fr



m n

，n

=

m n

；

    否 则 ， 令

f n  F

 m1 n

  ，

fr

n

 Fr

 m1 n

，

n

=

m 1 n

。

Step 5: j  j 1 ，若 j  J ，返回 Step 3；否

则，执行 Step 6。

Step 6: k  k 1 ，若 k  K ，返回 Step 3; 否

则 ， 输 出 f n 和 n ， 令    n ， f *  f *  f (n) ， fr* =fr*  fr n ，执行 Step 7。

Step 7: 令 n  n 1 ，若 n  N ，返回 Step 3,

否则，算法结束，输出

f

*

，

f

* r

和

。

4.2 不同规模下算法有效性验证

为验证算法有效性，利用 MATLAB 软件实现

启发式算法，求解不同规模下的实验结果，并与

Cplex 求解结果进行对比。选取堆场贝位大小取值

集合为{3,5,7,8,10,12,14,16,25,50}，栈位数量均为

6，层高限制均为 4，班列信息与小规模算例一致，

待作业箱数量取值集合分别为{60, 100, 150, 170,

200, 250, 300, 340, 520, 100}，对 10 个算例进行多

次实验，求出的箱位分配实验结果平均值如下表

2 所示。

表 2 不同规模下启发式算法与 Cplex 的求解结果对比

Tab. 2 Comparison of results of heuristic algorithm and Cplex solution under different scales

算例

P1 /贝

P2 /个

f

CPU/秒

GAP/%

编号

箱位规模 箱量 HA Cplex

HA

Cplex HA

Cplex

HA

Cplex

f

算例 1

3×6×4

60

2

2

3

3

5

5

0.07

0.13

0

算例 2

5×6×4

100

5

4

4

4

9

8

0.10

1.51

12.5

算例 3

7×6×4

150

7

7

6

5

13

12

0.13

5.46

8.33

算例 4

8×6×4

170

8

8

7

6

15

14

0.33

13.68

7.14

算例 5

10×6×4

200

10

9

8

8

18

17

0.54

78.68

5.88

算例 6

12×6×4

250

12

12

11

10

23

22

0.74

315.93

4.55

算例 7

14×6×4

300

15

15

11

10

26

25

0.95

846.49

4.00

算例 8

16×6×4

340

17

16

12

12

29

28

1.57

9175.53

3.57

算例 9

25×6×4

520

26

---

21

---

47

---

28.94

---

---

算例 10 50×6×4 1000 52

---

31

---

83

---

184.84

---

---

注：1） “---”号表示 Cplex 在有限时间 3h 之内仍未找到最优解；2） “HA”为启发式算法的简称；3） GAP  HA Cplex Cplex .

由上表 2 可知，虽然 Cplex 可求解出模型精 确解，但随着集装箱规模增大，箱位分配问题的 复杂性也成倍增长，与 Cplex 相比，启发式算法 节省的 CPU 逐渐增大。当集装箱数量为 340 时， Cplex 求解时间高达 9175.53 秒，而当规模增加至 520 及以上时，Cplex 在有限时间 3h 内无法计算 出最优解。然而，本文设计的启发式算法可在较 短时间内取得较优的箱位分配结果，当问题规模

为 1000 时，算法的 CPU 仅为 184.84 秒，由此可 见本文设计算法具备较好的寻优能力。此外，分 析 Cplex 和启发式算法的求解结果，两种方法求 解得出的目标函数的 GAP 较小，实际 f 相差最大 仅为 1，从而验证启发式算法的有效性。 4.3 灵敏度分析
为进一步验证本文提出的班列抵港模式下的 箱位分配模型和算法的优越性与普适性，计算不

同规模下抵港班列数量对箱位分配方案和目标函 数的影响。作业箱规模分别为{40, 80, 120, 160,

200, 240, 280, 320, 360}，到港班列数量分别为{4, 6, 8}，27 组算例实验结果如下图 5 和图 6 所示。

图 5 班列数量对目标函数的影响

Fig. 5 The influence of arrival number of trains on the objectives

由图 5 可看出，在同一集装箱规模下，随着 班列数量的增加，场桥移动贝位数和压箱量均整 体呈上升趋势，其中场桥移动贝位数增长较为平 稳，而压箱量上升趋势较明显。因此，在箱位分 配问题中，班列数量变化对堆存状态的影响比场

桥作业效率更为显著。这与实际情况相符，当班 列规模较大时，集装箱离港时间属性增加，集装 箱的“聚类”效应弱化，从而使得箱位指派问题 更为复杂，压箱量难免随之增加。所以，如图 5 所 示，在同一集装箱规模下，随着班列数量增加， 压箱量均呈现单调递增趋势。

图 6 任务规模对目标函数的影响 Fig. 6 The influence of containers numbers on the objectives

图 6 结果显示，当班列规模一定时，随着集 装箱规模增大，场桥移动贝位数和压箱量均呈现 较为明显的增长趋势。因而，任务规模增加导致 箱位分配问题复杂性增加，对场桥作业效率和翻 箱的影响均较为明显。观察同一班列数量下的压

箱率，不同任务规模下的压箱率的变化趋势呈现 波动状态，例如，集装箱数量为 360 时的压箱率 小于集装箱数量为 320 时，并不意味着压箱量下 降，而是由于集装箱数量增大而导致压箱率计算 公式中分母增长的趋势大于分子压箱量增长的趋

势。由图 6 可知，不同任务规模下的压箱率均小 于 10%。依据现场调研了解到，海铁联运堆场内 集装箱平均压箱率为 30%，可见本文构建的班列 到港模式下的箱位分配模型和算法大幅度改善了 集装箱码头翻箱问题，进一步验证了模型和算法 的有效性和优越性。
5 结论与展望
基于班列抵港模式和“海-堆场-铁”堆存模式， 集成考虑班轮和船舶实际卸箱过程中的现实约束， 探讨海铁联运进口箱的箱位分配问题。结合问题 特点，为提高堆场作业效率，考虑最小化压箱量 和最小化场桥移动贝位数两个目标，构建了箱位 分配整数非线性优化模型。通过模型的线性化处 理，小规模算例借助 Cplex 求解器验证模型的正 确性，并设计启发式算法求解大规模算例。算例

结果表明：1）与最低栈堆存策略相比，本文提出 的箱位分配模型可有效降低压箱量；2）通过与 Cplex 的实验结果进行比较验证了本文设计的启 发式算法具备较好的寻优能力和优越性；3）对班 列数量和任务规模进行灵敏度分析验证了本文提 出的箱位分配模型和算法的普适性，班列规模的 变化对压箱量的影响比对场桥负重移动贝位数的 影响更为明显。
然而，研究问题的角度还存在一定的局限性。 本文仅从静态角度考虑箱位分配问题，进一步的 研究将集中于海铁联运集装箱的动态翻箱问题。 在建立场桥移动距离与翻箱数量之间的内在联系 基础上，考虑集装箱离港时间不确定性，确定翻 箱操作时集装箱落箱位选择，以最小化二次翻箱 数量。

参考文献（References）：
[1] 靳志宏, 王小寒, 任刚等. 共享堆场协议下海铁联运 集装箱堆场分配优化[J]. 中国航海, 2020, 43(3): 105111. Jin Z H, Wang X H, Ren G, et al. Container yard allocation optimization of sea-rail intermodal transportation under yard sharing agreement[J]. Navigation of China, 2020, 43(3): 105-111. (in Chinese)
[2] Zhang C Q, Liu J Y, Wan Y W, et al. Storage space allocation in container terminals[J]. Transportation Research Part B, 2003, 37: 883-903.
[3] 武慧荣，朱晓宁，邓红星. 集装箱海铁联运港口混堆 堆场箱区均衡分配模型[J]. 重庆交通大学学报(自然 科学版), 2018, 37(4): 109-115. Wu H R, Zhu X N, Deng H X. Container space equilibrium assignment model of mixed storage in container sea-rail port[J]. Journal of Chongqing Jiaotong University (Nature Science), 2018, 37(4): 109115. (in Chinese)
[4] Chen L, Lu Z. The storage location assignment problem for outbound containers in a maritime terminal [J]. 2012, 135(1): 73-80.
[5] Zhen L, Zhou X, Wang K, et al. Multi-period yard template planning in container terminals [J]. Transportation Research Part B, 2016, 93: 700-719.
[6] Tan C M, He J L, Wang Y. Storage yard management based on flexible yard template in container terminal [J]. Advanced Engineering Informatics, 2017, 34:101-113.
[7] Jiang X, Lee L H, Chew E P, et al. A container yard storage strategy for improving land utilization and operation efficiency in a transshipment hub port [J]. European Journal of Operational Research, 2012, 221(1): 64-73.
[8] Lee Y, Chao S L. A neighborhood search heuristic for pre-marshalling export containers [J]. Europea n Journal of Operational Research, 2009, 196(2): 4 68-475.
[9] 范厚明，孔靓，马梦知等. 交箱序列不确定下的堆场 箱位分配及多场桥调度优化[J]. 系统工程理论与实 践, 2021, 41(5): 1294-1306. Fan H M, Kong L, Ma M Z, et al. Storage space allocation and multi-yard cranes scheduling in terminal yard with container delivery time uncertain[J]. Systems Engineering-Theory & Practice, 2021, 41(5): 12941306. (in Chinese)
[10] 靳志宏，毛钧， 李娜. 基于混合动态规划的集装箱 堆场贝位内翻箱作业调度优化[J]. 交通运输系统工 程与信息, 2011, 11(6): 131-136. Jin Z H, Mao J, Li N. Scheduling of relocating containers within a bay in container yard based on hybrid dynamic programming [J]. Journal of Transportation Systems Engineering and Information Technology, 2011, 11(6): 131-136. (in Chinese)
[11] 邵乾虔，徐奇，边展等. 考虑了交箱时间不确定性的 场桥堆存作业优化[J]. 系统工程理论与实践, 2015,

35(2): 394-405. Shao Q Q, Xu Q, Bian Z, et al. Stockpiling operating optimization for yard crane with containers delivery time uncertainty [J]. Systems Engineering-Theory & Practice, 2015, 35(2): 394-405. (in Chinese) [12] 计明军，黄思佳，郭文文. 海铁联运中心站堆场箱位 指派优化[J].系统工程理论与实践，2016, 36(6):1555 -1567. Ji M J, Huang S J, Guo W W. Container allocation optimization of the center terminal yard under rail-sea intermodal transportation [J]. Systems EngineeringTheory & Practice, 2016, 36(6): 1555-1567. (in Chinese) [13] Wang L, Zhu X N, Yan W, et al. Optimization model of mixed storage in railway container terminal yard[J]. Journal of Transportation Systems Engineering & Information Technology, 2013, 13(2):172-178. [14] Wang L, Zhu X N, Xie Z Y. Container assignment optimization considering overlapping amount and operation distance in rail-road transshipment terminal [J]. Advances in Production Engineering & Management, 2017, 12(4): 363-374. [15] Chang Y M, Zhu X N. A novel two-stage heuristic for solving storage space allocation problems in rail-water intermodal container terminals[J]. Symmetry, 2019, 11(10): 1-18. [16] Chang Y M, Zhu X N, Haghan A. Modelling and solution of joint storage space allocation and handling operation for outbound containers in rail-water intermodal container terminals [J]. IEEE Access, 2019, 7: 55142-55158. [17] Chang Y M, Zhu X N, Haghan A. The outbound container slot allocation based on the stowage plan in rail-water intermodal container terminals [J]. Measurement & Control, 2019, 52(5-6): 509-525. [18] 段刚, 陈莉，陈志忠等. 铁路集装箱堆场混堆区箱位 分配优化模型与算法[J]. 铁道学报, 2011, 33(7): 17. Duan G, Chen L, Chen Z Z, et al. Model and algorithm for optimization of container storage allocation in mixed storage area of railway container yard, 2011, 33(7): 1-7. (in Chinese) [19] 王小寒，贾玉林，蔡佳芯等. 铁路集装箱中心站资源 分配与作业调度联合优化[J/OL]. 控制与决策, 2021:
1-10. Wang X H, Jia Y L, Cai J X, et al. Integrating optimization of resource allocation and handling scheduling in railway container terminal[J/OL], Control and Decision, 2021:1-10. (in Chinese) [20] 常祎妹，朱晓宁. 考虑配载计划的铁路集港箱位指派 [J]. 交通运输工程学报, 2020, 20(4): 205-216. Chang Y M, Zhu X N. Slot allocation of railway container terminal considering stowage plan [J]. Journal of Traffic and Transportation Engineering, 2020, 20(4): 205-216. (in Chinese)

